function UIDiv(e,t){Styles.injectStylesheet("RED_uiElement",".ui-elem","position:absolute;"),t=t||"div";var a=document.createElement(t);if(Styles.addClass(a,"ui-elem"),e=e||{},e.id&&(a.id=e.id),Styles.setCss(a,e.css),e.target){var n=Markup.get(e.target);n.appendChild(a)}return Object.defineProperty(a,"parent",{get:function(){return a.parentNode}}),a.toString=function(){return"[object UIDiv]"},a}function UIComponent(e,t){var a=!0,n=!0;e=e||{},t=t||"div";var r=new UIDiv(e,t);return r._align=e.align,Object.defineProperties(r,{x:{get:function(){return Styles.getCss(r,"x")},set:function(e){Styles.setCss(r,{x:e})}},y:{get:function(){return Styles.getCss(r,"y")},set:function(e){Styles.setCss(r,{y:e})}},enabled:{get:function(){return a},set:function(e){a=e,r.dispatchEvent(UIEvent.componentEnabled)}},showing:{get:function(){return n},set:function(){}}}),"canvas"!=t&&Object.defineProperties(r,{width:{get:function(){return r.offsetWidth},set:function(e){Styles.setCss(r,{width:e});var t=new CustomEvent(UIEvent.RESIZE);t.direction="width",r.dispatchEvent(t)}},height:{get:function(){return r.offsetHeight},set:function(e){Styles.setCss(r,{height:e});var t=new CustomEvent(UIEvent.RESIZE);t.direction="height",r.dispatchEvent(t)}}}),r.hide=function(){r.style.display="none",n=!1},r.show=function(){try{r.style.removeProperty("display")}catch(e){r.style.display=null}n=!0},r.setCss=function(e){Styles.setCss(r,e)},r.addChild=function(e){var t=Markup.get(e);r.appendChild(t),e._align&&Align.set(e,e._align)},r.inspect=function(){for(var e={},t=Object.getOwnPropertyNames(r),a=0;a<t.length;a++){var n=r[t[a]];e[t[a]]=n}},r.toString=function(){return"[object UIComponent]"},r._initAlign=function(){e.align&&e.target&&Align.set(r,e.align)},r.enabled=!0,r._initAlign(),r}function UIImage(e){function t(t){var a=i?2:1,o=r.width/r.height,c=e.css.width||r.width,d=e.css.height||r.height,u=void 0==e.css.width,f=void 0==e.css.height;if(n||(u="height"==t,f="width"==t,c=l.width,d=l.height),u){var g;g=s&&!f?d*o:c/a,l.style.width=Math.round(g)+"px"}if(f){var h;h=s&&!u?c/o:d/a,l.style.height=Math.round(h)+"px"}}function a(e){t(e.direction)}Styles.injectStylesheet("RED_uiImage",".ui-image","background-repeat:no-repeat; background-size:contain;");var n=!0,r=null,i=!1,o="contain",s=!!e.aspectRatio;e.css||{};if(!e.source)throw new Error("UIImage : No image source set on '"+e.id+"'");e.css=e.css||{};var l=new UIComponent(e);return Styles.addClass(l,"ui-image"),Object.defineProperties(l,{source:{get:function(){return r},set:function(e){r=ImageManager.get(e),l.style.backgroundImage="url("+r.src+")"}},retina:{get:function(){return i},set:function(e){i=e,t()}},ratio:{get:function(){return o},set:function(e){o=e,l.style.backgroundSize=e}},aspectRatio:{get:function(){return s},set:function(e){s=e,t()}}}),l.toString=function(){return"[object UIImage]"},l.addEventListener(UIEvent.RESIZE,a),l.source=e.source,l.retina=!!e.retina,e.ratio&&(l.ratio=e.ratio),l._initAlign(),n=!1,l}function UITextField(e){function t(){for(var t in e)if("css"==t)for(var a in e.css)switch(a){case"x":case"y":case"width":case"height":p[a]=e.css[a]}else if("bufferText"==t){p[t]={};for(var n in f)p[t][n]=t[n]||0}else p[t]=e[t];delete p.target,delete p.id}function a(){h||("paragraphClamp"==u||"inlineClamp"==u?r():n())}function n(){if(Styles.setCss(v,{verticalAlign:"auto",height:"auto",width:"auto"}),"paragraphFit"==u){for(var e=d;m.scrollHeight>m.offsetHeight&&!(0>=e);)e--,m.style.fontSize=e+"px";for(;m.scrollWidth>m.offsetWidth&&!(0>=e);)e--,m.style.fontSize=e+"px";d=e,m.style.fontSize=d+"px"}else if("inlineFit"==u){var t=m.offsetWidth,a=m.offsetHeight;m.style.fontSize="243px";var n=v.offsetWidth,r=v.offsetHeight;m.style.fontSize="182px";var i=v.offsetWidth,o=v.offsetHeight,s=MathUtils.rel(243,182,n,i,t),l=MathUtils.rel(243,182,r,o,a);d=~~Math.min(d,Math.min(s,l)),m.style.fontSize=d+"px"}c&&Styles.setCss(v,{verticalAlign:c,height:m.offsetHeight-f.top-f.bottom,width:m.offsetWidth-f.left-f.right})}function r(){Styles.setCss(v,{height:"auto",width:"auto"}),m.width=v.offsetWidth,m.height=v.offsetHeight}Styles.injectStylesheet("RED_uiTextfield",".ui-textfield","position:absolute; white-space:nowrap;",".ui-textfield .content","position:relative; display:table-cell; cursor:default; pointer-events:none; line-height:100%; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;");var i,o,s,l,c,d=0,u="",f={top:0,bottom:0,left:0,right:0},g="",h=!0,p={};e=e||{};var m=new UIComponent(e);Styles.addClass(m,"ui-textfield");var v=document.createElement("span");return Styles.addClass(v,"content"),m.appendChild(v),Object.defineProperties(m,{alignText:{get:function(){return i},set:function(e){if(e&&i!=e){i=e;var t=(i.match(/(left|right)/gi)||["center"])[0].toLowerCase();Styles.setCss(m,{lineHeight:m.height,textAlign:t}),c=(i.match(/(bottom|top)/gi)||["middle"])[0].toLowerCase(),Styles.setCss(v,{verticalAlign:c})}}},fontSize:{get:function(){return d},set:function(e){!isNaN(e)&&e>0&&(d=e,m.style.fontSize=~~e+"px",a())}},fontFamily:{get:function(){return o},set:function(e){o=e,m.style.fontFamily=e,a()}},format:{get:function(){return u},set:function(e){if(u!=e){switch(u=e){case"paragraphClamp":case"paragraphFit":case"paragraph":Styles.setCss(m,{whiteSpace:"normal"});break;case"resizeFit":case"inlineClamp":case"inlineFit":default:Styles.setCss(m,{whiteSpace:"nowrap"})}a()}}},leading:{get:function(){return s},set:function(e){e&&s!=e&&(s=e,Styles.setCss(v,{lineHeight:100*s+"%"}),a())}},spacing:{get:function(){return Styles.getCss(m,"letterSpacing")},set:function(e){e&&l!=e&&(l=e,Styles.setCss(m,{letterSpacing:e}),a())}},bufferText:{get:function(){return f},set:function(e){if(e&&f!=e){for(var t="",n=["top","right","bottom","left"],r=0;4>r;r++){var i=n[r],o=isNaN(e)?e[i]||0:e;f[i]=o,t+=o+"px "}Styles.setCss(v,{padding:t}),a()}}},text:{get:function(){return g},set:function(e){void 0!=e&&""!=e&&(g=e,m.setDefault("text",e),v.innerHTML=e,a())}}}),m.resetToDefault=function(){if(h=!0,arguments.length>0)for(var e=0;e<arguments.length;e++)m[arguments[e]]=p[arguments[e]];else for(var t in p)void 0!=m[t]&&(m[t]=p[t]);h=!1,a()},m.setDefault=function(e,t){p[e]=t},m.toString=function(){return"[object UITextfield]"},m.enabled=!0,t(),m.format=e.format,m.fontSize=e.fontSize,m.fontFamily=e.fontFamily||"Arial",m.alignText=e.alignText,m.bufferText=e.bufferText,m.leading=e.leading,m.spacing=e.spacing,h=!1,m.text=e.text,m._initAlign(),m}function FrameRateBase(e){var t=this;t.pool=[],t.fps=e,t._frameTime=Math.floor(1e3/t.fps),t._prevTime=0,t._startTime=0,t._nextTime=0,t._maxLag=400,t._shiftLag=30,t._paused=!1,t._prevCallTime=Date.now(),t.diffTime=0}function GestureBase(e){var t=this;t.elem=e,t.hasActiveChildren=!0,t.debug=!1,t._isDragging=!1,t._isDrag=!1,t._dragTarget=null,t._give=2,t._total=0,t._xOff=0,t._xPrev=0,t._xPrev2=0,t._xStart=0,t._xVelocity=0,t._yOff=0,t._yPrev=0,t._yPrev2=0,t._yStart=0,t._yVelocity=0,t._isSelectBubbleStop=!1,t.init()}function GestureEvent(){var e=new CustomEvent("onDragStart");e.position={x:0,y:0},e.element={x:0,y:0};var t=new CustomEvent("onDrag");t.position={x:0,y:0},t.velocity={x:0,y:0},t.element={x:0,y:0},t.page={x:0,y:0};var a=new CustomEvent("onDragStop");a.position={x:0,y:0},a.velocity={x:0,y:0};var n=new CustomEvent("onSwipe");n.direction={x:null,y:null},n.distance={x:0,y:0},n.velocity={x:0,y:0};var r=new CustomEvent("onPress");r.position={x:0,y:0},r.page={x:0,y:0};var i=new CustomEvent("onRelease"),o=new CustomEvent("onFinishGestures"),s="desktop"!=Device.type?"touchend":"click";return{OVER:"mouseover",OUT:"mouseout",DOWN:"onPress",PRESS:"onPress",UP:"onRelease",RELEASE:"onRelease",CLICK:s,DRAG:"onDrag",DRAG_START:"onDragStart",DRAG_STOP:"onDragStop",SWIPE:"onSwipe",drag:t,dragStart:e,dragStop:a,swipe:n,press:r,release:i,finish:o,FINISH:"onFinishGestures"}}function CanvasDrawer(e){var t=this;return t._init(e),t}function CanvasTweenerBase(){}function CanvasElement(e,t){if(e){var a=this;a._type=e.type||t,a.stage=e.target,a.id=e.id||"canvasdItem"+a.stage.elementsLength,a.stage.elements[a.id]=a,a.stage.elementsLength++,a.isActive=e.isActive!==!1,a.rotation=e.params.rotation||0,a.scale=0===e.params.scale?0:e.params.scale||1,a.scaleX=0===e.params.scaleX?0:e.params.scaleX||1,a.scaleY=0===e.params.scaleY?0:e.params.scaleY||1,a.alpha=e.params.alpha>=0?e.params.alpha:e.params.opacity>=0?e.params.opacity:1,a.blendMode=e.blendMode||"source-over",a._transformOrigin="0 0",e.stroke=e.stroke||{};var n=!!e.dropShadow;e.dropShadow=e.dropShadow||{},a._shadowAngle=e.dropShadow.angle||0,a.shadowDistance=e.dropShadow.distance||0,a._shadowColor=e.dropShadow.color||(n?"#000000":null),a.shadowAlpha=e.dropShadow.alpha||a._shadowAlpha,a.shadowBlur=e.dropShadow.blur||0}}function CanvasImage(e){var t=this;e.params=e.params||{},CanvasElement.apply(t,[e,"image"]);var a=CanvasTexture._getIsSourceCanvas(e.source);t.src=a?"CANVAS"===e.source.tagName?e.source:e.source.canvas:"IMG"===e.source.tagName?e.source:ImageManager.get(e.source),t.sourceX=e.params.sourceX||0,t.sourceY=e.params.sourceY||0,t.sourceW=e.params.sourceW||t.src.width||t.src.getAttribute("width"),t.sourceH=e.params.sourceH||t.src.height||t.src.getAttribute("height"),t.width=e.params.width||(t.src.width||t.src.getAttribute("width"))/t.stage._imageScale,t.height=e.params.height||(t.src.height||t.src.getAttribute("height"))/t.stage._imageScale,t.x=e.params.x||e.params.left||0,t.y=e.params.y||e.params.top||0,t.transformOrigin=e.transformOrigin||"50% 50%"}function CanvasShape(e){if(e){var t=this;CanvasElement.apply(t,[e,e.type]),t.drawScale=e.drawScale||1,t.fill=e.fill,t.strokeFill=e.stroke.fill||null,t.strokeWidth=e.stroke.width||0,t.strokeCap=e.stroke.cap||"butt",t.strokeJoin=e.stroke.join||"miter",t.strokeDashSize=e.stroke.dashSize||1e4,t.strokeDashGap=e.stroke.dashGap||0,t.strokeDashOffset=e.stroke.dashOffset||0,t.strokePosition=e.stroke.position||"outer",0===t.strokeDashGap&&1e4!=t.strokeDashSize&&(t.strokeDashGap=t.strokeDashSize),t._setDrawArgs(e.params||[0,0,0,0,0],e)}}function CanvasRect(e){e.type="rect",CanvasShape.apply(this,arguments)}function CanvasCircle(e){e.type="arc",CanvasShape.apply(this,arguments)}function CanvasPath(e){e.type="path",CanvasShape.apply(this,arguments)}function CanvasText(e){var t=this;e.params=e.css||{},CanvasElement.apply(t,[e,"text"]),t.copy=e.copy,t.maxWidth=e.params.maxWidth||null,t.fontFamily=e.params.fontFamily||"_serif",t.fontSize=e.params.fontSize>=0?Number(e.params.fontSize.toString().replace(/px/g,"").replace(/pt/g,"")):12,t._marginLeft=e.params.offsetX||0,t._marginTop=e.params.offsetY||0,t._x=0,t._y=0,t._width=0,t._height=0,Object.defineProperties(t,{x:{get:function(){return t._x-t._marginLeft},set:function(e){t._x=e+t._marginLeft}},y:{get:function(){return t._y-t._marginTop},set:function(e){t._y=e+t._marginTop}},width:{get:function(){return t._width+t._marginLeft}},height:{get:function(){return t._height+t._marginTop}}}),t.x=e.params.x||e.params.left||0,t.y=e.params.y||e.params.top||0,t.textAlign=e.params.textAlign||"left","centered"===t.textAlign&&(t.textAlign="center"),t.fill=e.fill,t.strokeFill=e.stroke.fill||null,t.strokeWidth=e.stroke.width||0,t.strokeJoin=e.stroke.join||"round",t.strokeDashSize=e.stroke.dashSize||1e4,t.strokeDashGap=e.stroke.dashGap||0,t.strokeDashOffset=e.stroke.dashOffset||0,t.strokePosition=e.stroke.position||"outer",0===t.strokeDashGap&&1e4!=t.strokeDashSize&&(t.strokeDashGap=t.strokeDashSize),t._transOffsetX=0,t._transOffsetY=0,t.lineHeight=e.params.lineHeight||.75*t.fontSize,t.maxWidth=e.params.maxWidth||1e5,t.deltaProps={copy:"empty",fontFamily:"empty",fontSize:"empty",lineHeight:"empty",maxWidth:"empty",strokeWidth:"empty",textAlign:"empty",_transOffsetX:"empty",_transOffsetY:"empty"},t.drawProps={drawX:"empty",drawY:"empty",offsetX:"empty",offsetY:"empty",strokeOffset:"empty",copy:"empty"},t.stage.ctx.font=t.fontSize+"px "+t.fontFamily,t._wrapText(!1,!1);var a;switch(t.textAlign){case"left":a="0% 0%";break;case"right":a="0% 0%";break;case"center":a="50% 0%"}t.transformOrigin=e.transformOrigin||a,t.stage.ctx.font=null,t._translateOffset=!0}function CanvasSprite(e){function t(e){var t=a.data.fs[a.frame],n=t.f,r=t.s;a.element.sourceX=n.x,a.element.sourceY=n.y,a.element.sourceW=n.w,a.element.sourceH=n.h,a.element.x=~~((r.x+o)*i),a.element.y=~~((r.y+s)*i),a.element.width=~~(n.w*i),a.element.height=~~(n.h*i)}var a=document.createElement("span");a.sheet=e.sheet,a.data=e.data,a.element=e.element,a.total=a.data.fs.length-1,a.frame=0,a.sequences=e.sequences||{},a.id=e.id||"none";var n,r="all",i=e.scale||1,o=e.offsetX||0,s=e.offsetY||0;return a.sequence=function(e){return void 0==e?r:(n=a.sequences[e],r=e,a.frame=n[0],a.total=n[1],void t())},a.nextFrame=function(e){t(e),++a.frame>a.total&&(a.dispatchEvent(new CustomEvent("canvasSpriteComplete")),a.frame=n[0])},a.gotoFrame=function(e){a.frame=e,(a.frame>a.total||a.frame<n[0])&&(a.frame=n[0]),t()},a.sequences.all=[0,a.total],a.sequence(r),a}function UIBorder(e){Styles.injectStylesheet("RED_uiBorder",".ui-border","position:absolute; top:0px; left:0px; width:100%; height:100%; border-style:solid; box-sizing:border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box;");var t,a,n=new UIDiv(e);return Styles.addClass(n,"ui-border"),Object.defineProperties(n,{size:{get:function(){return t},set:function(e){void 0!=e&&t!=e&&(t=e,Styles.setCss(n,{borderWidth:t}))}},color:{get:function(){return a},set:function(e){e&&a!=e&&(a=e,Styles.setCss(n,{borderColor:a}))}}}),n.toString=function(){return"[object UIBorder]"},Gesture.disable(n),n.color=e.color,n.size=e.size,n}function UIButton(e){function t(t){var a,n=e.id+"-state-"+s.length;"string"==typeof t?a=new UIImage({target:l,id:n,source:t,css:{width:"inherit",height:"inherit"}}):(a=t,a.id=n,l.addChild(a),/(UITextField)/gi.exec(a.toString())&&a.resetToDefault()),s.push(a),Styles.addClass(a,"ui-button-state"),Gesture.disable(a)}function a(e){l.togglable&&(l.state=Number(!o)),l._onClick.call(l,e),l.onClick.call(l,e)}function n(e){l._onOver.call(l,e),l.onOver.call(l,e)}function r(e){l._onOut.call(l,e),l.onOut.call(l,e)}function i(e){var t=l.enabled?"addEventListener":"removeEventListener";Gesture[t](l,GestureEvent.CLICK,a),Gesture[t](l,GestureEvent.OVER,n),Gesture[t](l,GestureEvent.OUT,r)}Styles.injectStylesheet("RED_uiButton",".ui-button","position:absolute; width:30px; height:30px;",".ui-button-state","position: absolute; width:inherit; height:inherit;");var o=0,s=[];e=e||{};var l=new UIComponent(e);Styles.addClass(l,"ui-button"),e.icon=e.icon||[];for(var c=0;c<e.icon.length;c++)t(e.icon[c]);return l.togglable=!0,Object.defineProperty(l,"state",{get:function(){return o},set:function(e){o=e,e>=s.length&&(o=0);for(var t=0;t<s.length;t++)s[t].style.visibility=t==o?"visible":"hidden"}}),l.onClick=e.onClick||function(e){},l.onOver=e.onOver||function(e){},l.onOut=e.onOut||function(e){},l.toString=function(){return"[object UIButton]"},l._onClick=function(e){},l._onOver=function(e){},l._onOut=function(e){},l.addEventListener(UIEvent.ENABLED,i),l.enabled=!0,l.state=e.state||0,l}function UICanvas(e){e=e||{};var t=e.css.width,a=e.css.height;delete e.css.width,delete e.css.height;var n=new UIComponent(e,"canvas");n.setAttribute("width",t),n.setAttribute("height",a);var r=n.getContext("2d"),i=n.getContext("webgl");return Object.defineProperties(n,{context2d:{get:function(){return r}},context3d:{get:function(){return i}}}),n.toString=function(){return"[object UICanvas]"},n}function UISlider(e){function t(t){g[t]=document.createElement("div"),Styles.addClass(g[t],"ui-slider-"+t),g[t].id=e.id+"-"+t,e[t]&&Styles.setCss(g[t],e[t]),0==e[t]&&(g[t].style.display="none"),g.appendChild(g[t]),g.elements.push(g[t])}function a(e){g.percent=e/g.offsetWidth}function n(){var e=g.handle.offsetWidth/g.offsetWidth/2,t=MathUtils.restrict(d,e,1-e)-e;return 100*t}function r(){g.dispatchEvent(UIEvent.sliderUpdate),g.onUpdate.call(g,UIEvent.sliderUpdate),g._onUpdate.call(g,UIEvent.sliderUpdate)}function i(e){u=!0,a(e.position.x),f=e.page.x-e.position.x,r()}function o(e){u=!1}function s(e){pos=e.position.x,e.page.x<=f?pos=0:e.page.x>=f+g.offsetWidth&&(pos=g.offsetWidth),a(pos),r()}function l(e){e.stopImmediatePropagation()}function c(e){var t=g.enabled?"addEventListener":"removeEventListener";Gesture[t](g.hitState,GestureEvent.DOWN,i),Gesture[t](g.hitState,GestureEvent.UP,o),Gesture[t](g.hitState,GestureEvent.DRAG,s),Gesture[t](g.hitState,GestureEvent.CLICK,l)}Styles.injectStylesheet("RED_uiSlider",".ui-slider","position:absolute; width:100%; height:100%;",".ui-slider-bg, .ui-slider-track, .ui-slider-loaded, .ui-slider-handle, .ui-slider-hitState","position:absolute; width:100%; height:inherit;",".ui-slider-bg","background-color: #666666;",".ui-slider-loaded","background-color: #560000; width:0%;",".ui-slider-track","background-color: #cc0000; width:0%;",".ui-slider-handle","background-color: #ffffff; width:5%; left:0%;");var d=0,u=!1,f=0;e=e||{};var g=new UIComponent(e);Styles.addClass(g,"ui-slider");var h=["bg","loaded","track","handle","hitState"];g.elements=[];for(var p=0;p<h.length;p++)t(h[p]);return Object.defineProperties(g,{percent:{get:function(){return d},set:function(e){d=MathUtils.restrict(e,0,1),g.track.style.width=100*d+"%",g.handle.style.left=n()+"%"}},dragging:{get:function(){return u},set:function(){}}}),g.onUpdate=e.onUpdate||function(e){},g.toString=function(){return"[object UISlider]"},g._onUpdate=function(e){},g.addEventListener(UIEvent.ENABLED,c),g.enabled=!0,g}function AdData(e){this.adDataRaw=e?e:{},this.elements={},this.elements.redAdContainer=Markup.get("redAdContainer"),this.edgeData=new EdgeData}function MonetData(){function e(e){if("image"==e.type)return e.id in n?n[e.id]:e.url;var t=e.type;return"bool"==e.type?t="value":"video"==e.type&&(t="url"),e[t]}function t(e,t){var a=[];for(var n in e)0==n.indexOf(t)&&a.push(e[n]);return a}var a,n,r=this;r.init=function(e){a=e,n={}},r.get=function(t){if(t in a.rootAssets)return e(a.rootAssets[t]);for(var n in a.assetGroups)if(t in a.assetGroups[n])return e(a.assetGroups[n][t]);throw Monet.logEvent("MONET_DATA_ERROR",{error:'Ad requested missing feed key: "'+t+'"'}),new Error('!!! Requested MonetData "'+t+'" not found !!!')},r.hasValue=function(e){try{return""!=r.get(e)}catch(e){return!1}},r.addLoadedImageId=function(e,t){n[e]=t},r.getAssetsByType=function(e,n){var r=t(a.rootAssets,e);for(var i in a.assetGroups)r=r.concat(t(a.assetGroups[i],e));if(n){var o=[];for(var s in r)r[s].id.search(n)>-1&&o.push(r[s]);return o}return r}}var PrepareCore=new function(){function e(){"payload"in assets&&assets.payload.binary.length&&(o.wait(),new Loader(adParams.adPath+assets.payload.binary[0],{name:"fbaLoader",scope:global,fileType:"fba",onFail:failAd,onComplete:function(e){new Loader(e,{name:"fbaContentLoader",scope:global,onFail:failAd,onComplete:t}).load()}}).load())}function t(e){ImageManager.addFbaImages(e),o.done()}function a(){if("undefined"!=typeof views){var e=views.call();e.length&&(o.wait(),global.Views={},global.ViewStyles={},new ViewLoader(e,{name:"viewLoader",onComplete:function(){o.done()}}).load())}}function n(){ImageManager.addLoader(new Loader(assets.images,{name:"indexImages",prepend:adParams.imagesPath})),ImageManager.addLoader(new Loader(assets.edgeImages,{name:"edgeImages",prepend:adParams.edgePath}))}function r(){o.wait(),fontLoader=new Loader({name:"fontLoader",onComplete:i,onFail:global.failAd,scope:s}),fontLoader.add(new Loader(assets.fonts,{name:"fontSubLoader",prepend:adParams.fontsPath,fileType:"ttf"})),fontLoader.add(new Loader(assets.edgeFonts,{name:"fontEdgeSubLoader",prepend:adParams.fontsPath,fileType:"ttf"})),fontLoader.load()}function i(){o.done()}var o,s=this;s.init=function(t){o=new Async,o.onComplete(t),e(),a(),n(),r(),Device.init(),Device.trace(),Gesture.init(),CssManager.init(),o.start()}},Async=function(){var e=this;e.wait=function(){r.push(1)},e.done=function(){r.pop()},e.onComplete=function(e){t=e},e.start=function(){n=setInterval(i,a),i()};var t,a=25,n=-1,r=[],i=function(){t&&!r.length&&(clearInterval(n),t.call())}},Device=new function(){var e=this;e.pixelRatio=window.devicePixelRatio||"unknown",Object.defineProperties(e,{orientation:{get:function(){return window.innerWidth>window.innerHeight?"landscape":"portrait"}},dimensions:{get:function(){return{width:window.innerWidth,height:window.innerHeight}}}}),e.init=function(){e.agentString=navigator.userAgent;for(var t in e)"init"!=t&&"trace"!=t&&"function"==typeof e[t]&&e[t].call()},e.trace=function(){var t=Array(70).join("-"),a="\n"+t;a+="\n AGENT:\n\n	"+e.agentString+"\n",a+="\n  Brand:			"+e.brand,a+="\n  Product:			"+e.product,a+="\n  Type:				"+e.type,a+="\n  Os:				"+e.os+" - "+e.osVersion,a+="\n  Browser:			"+e.browser+" - "+e.browserVersion,a+="\n  Dimensions: 		"+e.dimensions.width+"x"+e.dimensions.height,a+="\n  Orientation:		"+e.orientation,a+="\n  Pixel Ratio:		"+e.pixelRatio,a+="\n"+t},e._getType=function(){var t=/(android|mobile)/gi.exec(e.agentString),a=/(tablet|touch)/gi.exec(e.agentString),n=/(ipad)/gi.exec(e.agentString);e.type="desktop",t&&(e.type="mobile"),a&&(e.type="tablet"),n&&(e.type="tablet")},e._getBrandAndOS=function(){var t=e.agentString.match(/ip(hone|od|ad)|mac/gi);if(t){e.brand="apple",e.product=t[0].toLowerCase();var a=/(OS\s)(\X\s|)([\d\.\_]+)/gi.exec(e.agentString);return e.os=""==a[2]?"ios":"osx",void(e.osVersion=a[3].replace(/\_/g,"."))}var n=/(android)\/?\s*([0-9\.]+)/gi.exec(e.agentString);if(n)return e.brand=e.product=e.os=n[1].toLowerCase(),void(e.osVersion=n[2]);var r=/(windows\snt\s|windows\sphone)\/?\s*([0-9\.]+)/gi.exec(e.agentString);if(r){switch(e.brand="microsoft",e.os="windows",r[2]){case"5.2":e.osVersion="xp";break;case"6.0":e.osVersion="vista";break;case"6.1":e.osVersion="7";break;case"6.2":e.osVersion="8";break;case"6.3":e.osVersion="8.1";break;case"10.0":e.osVersion="10";break;default:e.osVersion=r[2]}return e.product=r[1].toLowerCase(),void(e.product.match(/\snt/i)&&(e.product="pc"))}var i=e.agentString.match(/(blackberry|bb10|playbook)/i);i&&(e.brand=e.product=e.os="blackberry",e.osVersion=/(version)\/?\s*([0-9\.]+)/gi.exec(e.agentString)[2])},e._getBrowser=function(){var t=/(edge(?=\/))\/?\s*([0-9\.]+)/i.exec(e.agentString);if(t||(t=e.agentString.match(/(fban|fbav|opera|chrome|crios|safari|firefox|msie|trident(?=\/))\/?\s*([0-9\.]+)/i)),!t||t.length<3){switch(e.os){case"ios":e.browser="safari";break;case"windows":e.browser="trident";break;default:e.browser="chrome"}return void(e.browserVersion="os-default")}switch(e.browser=t[1].toLowerCase(),e.browserVersion=t[2],e.browser){case"trident":var a=/\brv:+(\d+)/g.exec(e.agentString);a&&(e.browserVersion=a[1]);case"msie":e.browser="ie";break;case"crios":e.browser="chrome";break;case"safari":var a=e.agentString.match(/\sversion\/([0-9\.]+)\s/i);a&&(e.browserVersion=a[1]);break;case"chrome":var a=e.agentString.match(/\b(OPR)\/([0-9\.]+)/i);a&&(e.browser="opera",e.browserVersion=a[2])}}},CssManager=new function(){function e(){return/^[+-]?[0-9]*\.?[0-9]+/}function t(){return/^-*(moz-*|webkit-*|ms-*|o-)/i}var a=this;a.init=function(){a.generateBrowserKeyDictionary()},a.debug_level1=!1,a.debug_level2=!1,a.filter,a.debug_element,a.debug_css_list,a.setDebugLevel=function(e){switch(parseInt(e)){case 1:a.debug_level1=!0,a.debug_level2=!1;break;case 2:a.debug_level1=!0,a.debug_level2=!0;break;default:a.debug_level1=!1,a.debug_level2=!1}},a.setDebugFilter=function(e){a.filter=e,a.debug_level1=!0},a.ifDebug=function(e){return a.filter?a.passDebugFilter()&&a[e]?!0:void 0:a[e]},a.passDebugFilter=function(){if(a.debug_element&&a.debug_element.id.indexOf(a.filter)>-1)return!0;if(a.debug_css_list)for(var e in a.debug_css_list){if(e.indexOf(a.filter)>-1)return!0;if(String(a.debug_css_list[e]).indexOf(a.filter)>-1)return!0}return!1},a.deviceKeyDict,a.generateBrowserKeyDictionary=function(){a.deviceKeyDict={};var e=document.createElement("div").style;for(var t in e){var n=a.getPrefix(t),r=a.standardizeKey(t);switch(Device.browser){case"safari":"webkit"==n?a.deviceKeyDict[r]=a.prependPrefix("webkit",r):a.prependPrefix("webkit",r)in e||(a.deviceKeyDict[r]=r);break;case"firefox":var i=a.prependPrefix("Moz",r),o=a.prependPrefix("Webkit",r);r in e?a.deviceKeyDict[r]=r:"moz"==n?a.camelateKey("webkit-"+r)in e&&(a.deviceKeyDict[r]=i):"webkit"==n&&(i in e||(a.deviceKeyDict[r]=o));break;case"chrome":case"ie":default:r in e?a.deviceKeyDict[r]=r:n&&(a.deviceKeyDict[r]=a.prependPrefix(n,r))}}},a.apply=function(e,t){a.debug_element=e,a.debug_css_list=t;for(var n in t)n.match(/^transform\(/)?a.applyTransform(e,n,t[n]):e.style[a.getDeviceKey(n)]=t[n];a.debug_element=null,a.debug_css_list=null},a.conformCssObject=function(e,t){a.debug_element=t;var n={};if(e)for(var r in e){var i=a.conformKeyValue(r,e[r]);for(var o in i)n[i[o][0]]=i[o][1]}return a.debug_element=null,n},a.conformCssString=function(e,t){a.debug_element=t;var n={};if(e){var r=e.split(/\s*;\s*/);for(var i in r)if(r[i]){var o=r[i].split(/:(.+)?/),s=a.conformKeyValue(o[0],o[1]);for(var l in s)n[s[l][0]]=s[l][1]}}return a.debug_element=null,n},a.conformCssKeyValue=function(e,t){var n={};return n[e]=t,a.conformCssObject(n)},a.applyTransform=function(e,t,n){var r=new Matrix2D,i=e.style[a.getDeviceKey("transform")],o=i.match(/matrix[^\)]+\)/);o&&r.setFromCss(o[0]);var s=t.match(/\(\s([^\s]+)/)[1];if("transforms"in e)var l=e.transforms;else var l={tx:0,ty:0,rz:0,sx:1,sy:1};var c=-1*l[s];switch(s){case"tx":r.translate(c,0),r.translate(n,0);break;case"ty":r.translate(0,c),r.translate(0,n);break;case"rz":r.rotate(c*Math.PI/180),r.rotate(n*Math.PI/180);break;case"sx":c=1,r.scale(c,1),r.scale(n,1);break;case"sy":c=1,r.scale(1,c),r.scale(1,n)}l[s]=n,e.transforms=l,e.style[a.getDeviceKey("transform")]=r.getCss()},a.conformKeyValue=function(e,t){e=String(e).trim(),t=String(t).trim();var n=a.standardizeKey(e);return a.conformValue(n,t)},a.hasPrefix=function(e){return e.search(t())>-1},a.getPrefix=function(e){var a=e.match(t());return a?a[1].replace(/-/g,"").toLowerCase():null},a.stripPrefix=function(e){var a=e.replace(t(),"");return a.charAt(0).toLowerCase()+a.slice(1)},a.getDeviceKey=function(e){return e in a.deviceKeyDict?a.deviceKeyDict[e]:e},a.prependPrefix=function(e,t){return e+t.replace(/^(.)/,function(e){return e.charAt(0).toUpperCase()})},a.standardizeKey=function(e){return e=a.stripPrefix(e),e=e in a.keyFormatExceptions()?a.keyFormatExceptions()[e]:a.camelateKey(e)},a.camelateKey=function(e){return e=e.replace(/-(.)/g,function(e){return e.charAt(1).toUpperCase()})},a.keyFormatExceptions=function(){return{x:"transform( tx )",translateX:"transform( tx )",y:"transform( ty )",translateY:"transform( ty )",rotate:"transform( rz )",rotation:"transform( rz )",scaleX:"transform( sx )",scaleY:"transform( sy )"}},a.conformValue=function(t,a){var n,r=[],i=a.match(/\s/),o=a.match(e());if(!i&&o){n=Number(o[0]);var s=a.match(/[^0-9\.]+$/);if(s)n+=s[0];else switch(t){case"top":case"right":case"bottom":case"left":case"width":case"height":case"fontSize":case"lineHeight":case"borderRadius":case"padding":case"margin":case"marginRight":case"marginLeft":case"marginTop":case"marginBottom":case"borderRadius":case"borderWidth":case"letterSpacing":n+="px"}}else if("backgroundImage"==t)a=a.replace(/^url\(\s*['"]*/,"").replace(/['"]*\s*\)$/,""),n='url( "'+a+'" )';else if("transform"==t)for(var l=/([a-z0-9]+)\(([^\)]+)\)/gi;params=l.exec(a);){var c=params[2].replace(/\s/g,"").split(",").map(function(t,a,n){return Number(t.match(e())[0])});switch(params[1]){case"translate":r.push(["transform( tx )",c[0]]),r.push(["transform( ty )",c[1]]);break;case"translateX":r.push(["transform( tx )",c[0]]);break;case"translateY":r.push(["transform( ty )",c[0]]);break;case"rotate":r.push(["transform( rz )",c[0]]);break;case"scale":r.push(["transform( sx )",c[0]]),r.push(["transform( sy )",c[1]]);break;case"scaleX":r.push(["transform( sx )",c[0]]);break;case"scaleY":r.push(["transform( sy )",c[0]])}}else n=a;return void 0!=n&&r.push([t,n]),r}},ImageManager=new function(){function e(e){for(var t=0;t<e.length;t++)if(e[t]instanceof Image||e[t]instanceof SVGElement){var a=e[t];d[a.id]=a}for(var t=0;t<g.length;t++)g[t].call();c.length>0&&o.load(c)}function t(e){var t=void 0!=d[e];return t}function a(t){u=!1,e(t.getAllContentRaw())}function n(){u=!1,i.call()}var r,i,o=this,s=[],l=[],c=[],d={},u=!1,f=0,g=function(){};o.addToLoad=function(e,a){e=(a||"")+e;var n=LoaderUtils.getFileName(e);return t(n)||s.push(e),n},o.addLoader=function(e){l.push(e)},o.get=function(e){if(d[e])return d[e];throw new Error("ImageManager : No image named '"+e+"' has been loaded")},o.load=function(e,t){if(i=t||global.failAd,u)c.push(e);else{r=new Loader({name:"imageManagerLoader",onComplete:a,onFail:n}),g=[].concat(e),c=[];var o=s.slice();s=[],r.add(new Loader(o,{name:"dynamicImages-"+f++,fileType:"jpg"}));var d=l.slice();l=[];for(var h=0;h<d.length;h++)r.add(d[h]);u=!0,r.load()}},o.addFbaImages=function(t){t&&e(t.getAllContentRaw())}},Styles=new function(){var e=this;e.setCss=function(e,t){e=Markup.get(e);var a={};if(arguments.length>2)for(var n=1;n<arguments.length;n+=2)a=CssManager.conformCssKeyValue(arguments[n],arguments[n+1]);else a="string"==typeof arguments[1]?CssManager.conformCssString(arguments[1],e):CssManager.conformCssObject(arguments[1],e);CssManager.apply(e,a)},e.getCss=function(e,t){e=Markup.get(e);var a;if("x"==t||"y"==t){var n=e.style[CssManager.getDeviceKey("transform")],r=n.replace(/[\s\(\)matrix]/g,"").split(",");a=r.length<6?0:+r["x"==t?4:5]}else{var i=window.getComputedStyle(e,null);a=i.getPropertyValue(t).replace(/px/,""),isNaN(a)||(a=parseInt(a,10))}return a},e.injectStylesheet=function(e,t){if(!document.getElementById(e)){var a=document.createElement("style");a.type="text/css",a.id=e;var n=2===arguments.length?t:"";if(arguments.length>2)for(var r=0;r<arguments.length-1;r+=2){var i=arguments[r+1].replace(/\,\s+/g,",");n+=i,n+=" { "+(arguments[r+2]||"")+" }\n"}a.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(a)}},e.addClass=function(e,t){for(var a=Markup.get(e),n=0;n<arguments.length-1;n++)a.classList.add(arguments[n+1])},e.removeClass=function(e,t){var a=Markup.get(e);a.classList.remove(t)}},Markup=new function(){var e=this;e.get=function(e,t){if("string"!=typeof e)return e;switch(t=t||document,e=e.trim(),e[0]){case"#":return t.getElementById(e.slice(1));case".":return t.getElementsByClassName(e.slice(1));case"<":return t.getElementsByTagName(e.slice(1,e.length-1));default:return t.getElementById(e)}},e.getElement=function(t,a){return e.get(t,a)},e.removeChildren=function(e){for(var t=Markup.get(e);t.firstChild;)t.removeChild(t.firstChild)},e.applyContainerCss=function(e,t){t.css||(t.css={}),t.css.position||(t.css.position="absolute"),Styles.setCss(e,t.css),Styles.setCss(e,t.styles)},e.addiFrame=function(e){var t=document.createElement("iFrame");return t.id=e.id,t.width=e.css.width,t.height=e.css.height,delete e.css.width,delete e.css.height,t.setAttribute("src",e.source),t.setAttribute("frameborder","0"),t.setAttribute("scrolling","no"),t.setAttribute("allowfullscreen",""),Markup.applyContainerCss(t,e),e.target.appendChild(t),t},e.addSvg=function(e){var t="http://www.w3.org/2000/svg",a=document.createElementNS(t,"svg");a.setAttribute("height",e.height),a.setAttribute("width",e.width);var n=document.createElementNS(t,"path");return n.setAttribute("d",e.d),n.setAttribute("fill",e.fill),void 0!=e.stroke&&n.setAttribute("stroke",e.stroke),void 0!=e.strokeWidth&&n.setAttribute("stroke-width",e.strokeWidth),a.appendChild(n),Markup.applyContainerCss(a,e),e.target.appendChild(a),a},e.applyToElements=function(e){if(void 0===e.elements.length)e.method.call(e.scope,e.elements,e.methodArg);else{var t;for(t=0;t<e.elements.length;t++){var a=e.elements[t];e.method.call(e.scope,a,e.methodArg)}}}},Align=function(){function e(e,t){var i=e.canvas||Markup.get(e),o={},s=t.snap!==!1,l=n(e)?0:1;"string"==typeof t&&(t=a(t));for(var c in t)if("x"==c||"y"==c){
var d=t[c];if(!d)continue;"string"==typeof d&&(d={type:d});var u,f,g=0;if(d.against){u=d.against;var h=0;n(u)?u.canvas?h=1:g=Styles.getCss(u,c):(g=u[c],h=1),f=r[h][c]}else u=i[r[l].parent],f=r[l][c];var p=i[r[l][c]];e.qualityScale&&(p/=e.qualityScale);var m=a(d.type,p,u[f],!!t[c].outer);null!=m&&(m+=g+(d.offset||0),o[c]=s?Math.round(m):m)}return o}function t(t,a){var r=e(t,a);if(n(t)){var i=t.canvas||Markup.get(t);Styles.setCss(i,r)}else for(var o in r)t[o]=r[o];return r}function a(e,t,a,n){var r=1==arguments.length;switch(e){case"alignBottom":if(n&&(t=0),!r)return a-t;case"alignTop":return r?{y:e}:n?-t:0;case"alignRight":if(n&&(a=0),!r)return a-t;case"alignLeft":return r?{x:e}:n?a:0;case"alignCenter":return n&&(a=0),r?{x:e,y:e}:(a-t)/2;default:return null}}function n(e){return e instanceof HTMLElement||void 0!=e.canvas}var r=[{x:"offsetWidth",y:"offsetHeight",parent:"parentNode"},{x:"width",y:"height",parent:"stage"}];return{BOTTOM:"alignBottom",CENTER:"alignCenter",LEFT:"alignLeft",RIGHT:"alignRight",TOP:"alignTop",BOTTOM_LEFT:"alignBottomLeft",BOTTOM_RIGHT:"alignBottomRight",TOP_LEFT:"alignTopLeft",TOP_RIGHT:"alignTopRight",get:e,set:t,calculate:a}}(),TextFormat=function(){return{INLINE:"inline",INLINE_FIT:"inlineFit",INLINE_CLAMP:"inlineClamp",PARAGRAPH:"paragraph",PARAGRAPH_FIT:"paragraphFit",PARAGRAPH_CLAMP:"paragraphClamp"}}(),UIEvent=function(){var e=new CustomEvent("uiComponentEnabled"),t=new CustomEvent("uiSliderUpdate");return{ENABLED:"uiComponentEnabled",RESIZE:"uiResize",SLIDER_UPDATE:"uiSliderUpdate",componentEnabled:e,sliderUpdate:t}}(),FrameRate=new function(){function e(){if(!n){for(var t in i)i[t].tick();window.requestAnimationFrame(e)}}for(var t,a=this,n=!0,r=!0,i={},o=/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent),s=["webkit","moz"],l=0;!window.requestAnimationFrame&&l<s.length;l++)window.requestAnimationFrame=window[s[l]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[s[l]+"CancelAnimationFrame"]||window[s[l]+"CancelRequestAnimationFrame"];window.requestAnimationFrame&&window.cancelAnimationFrame&&!o||(window.requestAnimationFrame=function(e){return setTimeout(e,17)},window.cancelAnimationFrame=clearTimeout),a.register=function(e,t,n){n=n||30,i[n]||(i[n]=new FrameRateBase(n));for(var o=i[n].pool,s=0;s<o.length;s++)if(o[s].from===e&&o[s].handler===t)return;o.push({handler:t,from:e}),r&&a.resume()},a.unregister=function(e,t,n){for(var o in i)if(!n||o==n){for(var s=i[o].pool,l=0;l<s.length;l++)if(s[l].from===e&&s[l].handler===t){s.splice(l,1);break}0==s.length&&delete i[o]}0===Object.keys(i).length&&(a.pause(),r=!0)},a.pause=function(){if(arguments.length>0){for(var e=0;e<arguments.length;e++){var a=arguments[e];i[a]&&(i[a]._paused=!0,n=!0)}for(var o in i)if(!i[o]._paused){n=!1;break}}else{for(var o in i)i[o]._paused=!0;n=!0}n&&(r=!1,window.cancelAnimationFrame(t))},a.resume=function(){var a=!n;if(arguments.length>0)for(var o=0;o<arguments.length;o++){var s=arguments[o];i[s]&&(i[s]._paused=!1,n=!1)}else{for(var l in i)i[l]._paused=!1;n=!1}a||(r=!0,t=window.requestAnimationFrame(e))},a.secondsAsFrames=function(e){return 1/e}};FrameRateBase.prototype={resume:function(){var e=this;e._isPaused&&(e._startTime=Date.now(),e._prevCallTime=e._startTime,e._prevTime=e._startTime,e._nextTime=0,e._isPaused=!1)},tick:function(){var e=this;if(!e._paused){var t=!1,a=Date.now(),n=a-e._prevTime;n>e._maxLag&&(e._startTime+=n-e._shiftLag),e._prevTime=a;var r=e._prevTime-e._startTime,i=r-e._nextTime;i>0&&(e._nextTime+=i>=e._frameTime?i:e._frameTime,t=!0,e.diffTime=a-e._prevCallTime,e._prevCallTime=a),t&&e.dispatch()}},dispatch:function(){for(var e=this,t=0;t<e.pool.length;t++){var a=e.pool[t];a.handler.call(a.from,this)}}};var Gesture=new function(){function e(e){for(var a=null,n=0;n<l.length;n++)if(l[n].elem===e){a=l[n];break}return a||(a=t(e)),a}function t(e){return _gestureBase=new GestureBase(e),_gestureBase.addEventListener(GestureEvent.FINISH,i),l.push(_gestureBase),_gestureBase}function a(t,a){var n=e(t);if(n.hasActiveChildren!=a){n.hasActiveChildren=a;for(var r=n.elem.getElementsByTagName("*"),i=0;i<r.length;i++)r[i].parentNode==t&&(a?s.enable(r[i]):s.disable(r[i]))}}function n(e,t,a,r){e.style.visibility="hidden",r.push(e);for(var i=document.elementFromPoint(t,a),o=0;o<c.length;o++)if(c[o].elem==i)return n(i,t,a,r);return i}function r(e){for(var t=[],a=n(e.target,e.clientX,e.clientY,t),r=0;r<t.length;r++)t[r].style.visibility="visible";return t=[],e.stopImmediatePropagation(),a}function i(e){for(var t=0;t<l.length;t++)l[t].finishPostStopBubble(e)}function o(e){var t=r(e),a=document.createEvent("HTMLEvents");a.initEvent(e.type,!0,!1),t.dispatchEvent(a)}var s=this,l=[],c=[],d=void 0!=document.createEventObject;s.init=function(){global.GestureEvent=new GestureEvent},s.addEventListener=function(t,a,n){var r=e(t);r.addEventListener(a,n),r._total++,Styles.setCss(t,"cursor","pointer"),Styles.setCss(t,"pointer-events","auto")},s.removeEventListener=function(t,a,n){var r=e(t);r&&(r.removeEventListener(a,n),r._total--,r._total<=0&&Styles.setCss(t,"cursor","auto"))},s.disable=function(t){var a=e(t);c.push(a),d?(a.addEventListener(GestureEvent.CLICK,o),Styles.setCss(t,"cursor","auto")):Styles.setCss(t,"pointer-events","none")},s.disableChildren=function(e){a(e,!1)},s.enable=function(t){for(var a=e(t),n=0;n<c.length;n++)if(a==c[n]){d?a.removeEventListener(GestureEvent.CLICK,o):(Styles.setCss(t,"pointer-events","auto"),Styles.setCss(t,"cursor","pointer"));break}},s.enableChildren=function(e){a(e,!0)}};GestureBase.prototype={init:function(){var e=this;e._handleDrag=e._handleDrag.bind(e),e._handleSwipe=e._handleSwipe.bind(e),e._handleDown=e._handleDown.bind(e),e._handleUp=e._handleUp.bind(e),e._handleDragStart=e._handleDragStart.bind(e),e._handleTouchStart=e._handleTouchStart.bind(e),e._handleTouchMove=e._handleTouchMove.bind(e),e._handleTouchDrag=e._handleTouchDrag.bind(e),e._handleTouchEnd=e._handleTouchEnd.bind(e),e._handleSelectStopBubble=e._handleSelectStopBubble.bind(e),e.addEventListener=e.elem.addEventListener.bind(e.elem),e.removeEventListener=e.elem.removeEventListener.bind(e.elem),e.elem.addEventListener("touchstart",e._handleTouchStart),e.elem.addEventListener("mousedown",e._handleDown),e.elem.addEventListener(GestureEvent.CLICK,e._handleSelectStopBubble)},_handleDown:function(e){var t=this;t._isDragging=!1,t._isDrag=!1,window.addEventListener("mouseup",t._handleUp),window.addEventListener("touchend",t._handleTouchEnd),window.addEventListener("mousemove",t._handleDragStart),window.addEventListener("touchmove",t._handleTouchMove);var a=t._getEventScope(e),n=e.target.getBoundingClientRect();GestureEvent.press.position.x=a.pageX-n.left,GestureEvent.press.position.y=a.pageY-n.top,GestureEvent.press.page.x=a.pageX,GestureEvent.press.page.y=a.pageY,t.elem.dispatchEvent(GestureEvent.press)},_handleUp:function(e,t){var a=this;window.removeEventListener("mouseup",a._handleUp),window.removeEventListener("touchend",a._handleTouchEnd),window.removeEventListener("mousemove",a._handleDragStart),window.removeEventListener("touchmove",a._handleTouchMove),window.removeEventListener("mousemove",a._handleDrag),window.removeEventListener("touchmove",a._handleTouchDrag),t!==!0&&a.elem.dispatchEvent(GestureEvent.release),a._isDragging&&a._handleDragStop(e),a.elem.addEventListener("touchstart",a._handleTouchStart),a.elem.addEventListener("mousedown",a._handleDown),e.preventDefault()},_handleTouchStart:function(e){var t=this;t._handleDown(e)},_handleTouchMove:function(e){var t=this;t._handleDragStart(e)},_handleTouchDrag:function(e){var t=this;t._handleDrag(e)},_handleTouchEnd:function(e){var t=this;t._handleUp(e)},_getEventScope:function(e){return"android"==Device.os&&e instanceof TouchEvent?e.changedTouches[0]:e},_handleSelectStopBubble:function(e){var t=this;t._isDrag&&(e.stopImmediatePropagation(),t.elem.dispatchEvent(GestureEvent.finish))},finishPostStopBubble:function(e){var t=this;t.elem.removeEventListener("touchstart",t._handleTouchStart),t.elem.removeEventListener("mousedown",t._handleDown),t._handleUp(e,!0)},_handleDragStart:function(e){var t=this,a=t._getEventScope(e);t._dragTarget=e.target;var n=t._dragTarget.getBoundingClientRect(),r=a.pageX-n.left,i=a.pageY-n.top;t._xStart=t._xPrev=t._xPrev2=r,t._yStart=t._yPrev=t._yPrev2=i;var o=parseInt(t.elem.style.left.replace(/px/,""),10),s=parseInt(t.elem.style.top.replace(/px/,""),10);t._xOff=r-o,t._yOff=i-s,GestureEvent.dragStart.position.x=r,GestureEvent.dragStart.position.y=i,GestureEvent.dragStart.element.x=o,GestureEvent.dragStart.element.y=s,window.removeEventListener("mousemove",t._handleDragStart),window.removeEventListener("touchmove",t._handleTouchMove),window.addEventListener("mousemove",t._handleDrag),window.addEventListener("touchmove",t._handleTouchDrag)},_handleDrag:function(e){var t=this,a=t._getEventScope(e),n=t._dragTarget.getBoundingClientRect(),r=a.pageX-n.left,i=a.pageY-n.top,o=r-t._xPrev,s=r-t._xPrev2;t._xVelocity=(s-o)/2+o;var l=i-t._yPrev,c=i-t._yPrev2;t._yVelocity=(c-l)/2+l,GestureEvent.drag.position.x=r,GestureEvent.drag.position.y=i,GestureEvent.drag.element.x=r-t._xOff,GestureEvent.drag.element.y=i-t._yOff,GestureEvent.drag.velocity.x=t._xVelocity,GestureEvent.drag.velocity.y=t._yVelocity,GestureEvent.drag.page.x=a.pageX,GestureEvent.drag.page.y=a.pageY,t._isDragging?t.elem.dispatchEvent(GestureEvent.drag):(Math.abs(t._xStart-r)>t._give||Math.abs(t._yStart-i)>t._give)&&(t._isDragging=!0,t._isDrag=!0,t.elem.dispatchEvent(GestureEvent.dragStart)),t._xPrev2=t._xPrev,t._xPrev=r,t._yPrev2=t._yPrev,t._yPrev=i},_handleDragStop:function(e){var t=this;t._isDragging=!1,GestureEvent.dragStop.position.x=t._xPrev,GestureEvent.dragStop.position.y=t._yPrev,GestureEvent.dragStop.velocity.x=t._xVelocity,GestureEvent.dragStop.velocity.y=t._yVelocity,t.elem.dispatchEvent(GestureEvent.dragStop),t._handleSwipe(e)},_handleSwipe:function(e){var t=this;GestureEvent.swipe.direction.x=t._xVelocity>0?"right":t._xVelocity<0?"left":null,GestureEvent.swipe.direction.y=t._yVelocity>0?"down":t._yVelocity<0?"up":null,GestureEvent.swipe.distance.x=t._xPrev-t._xStart,GestureEvent.swipe.distance.y=t._yPrev-t._yStart,GestureEvent.swipe.velocity.x=t._xVelocity,GestureEvent.swipe.velocity.y=t._yVelocity,t.elem.dispatchEvent(GestureEvent.swipe)}};var Matrix2D=function(){var e=this;e.identity=new Float32Array([1,0,0,0,1,0]),e.data=new Float32Array(e.identity)};Matrix2D.prototype={clear:function(){var e=this;e.data.set(e.identity)},rotate:function(e){var t=this,a=new Float32Array(t.identity),n=Math.cos(e).toFixed(15),r=Math.sin(e).toFixed(15);return a[0]=n,a[1]=r,a[3]=-r,a[4]=n,t.multiply(a),t},scale:function(e,t){var a=this,n=new Float32Array(a.identity);return n[0]=e,n[4]=t,a.multiply(n),a},skew:function(e,t){var a=this,n=new Float32Array(a.identity);return n[1]=Math.tan(e),n[3]=Math.tan(t),a.multiply(n),a},translate:function(e,t){var a=this,n=new Float32Array(a.identity);return n[2]=e||0,n[5]=t||0,a.multiply(n),a},multiply:function(e){for(var t=this,a=new Float32Array(t.data),n=0;6>n;n++){var r=3*Math.floor(n/3),i=n%3;t.data[n]=a[r]*e[i]+a[r+1]*e[i+3]}t.data[2]+=a[2],t.data[5]+=a[5]},setFromCss:function(e){var t=e.match(/\(([^\)]+)\)/)[1].replace(/\s/g,"").split(",").map(Number);this.data=[t[0],t[1],t[4],t[2],t[3],t[5]]},getCss:function(){var e=this;return"matrix("+e.data[0]+","+e.data[1]+","+e.data[3]+","+e.data[4]+","+e.data[2]+","+e.data[5]+")"}};var ParentTransform=function(e){function t(e){var t=e[0]-a.originX,r=e[1]-a.originY,i=t*n.data[0]+r*n.data[3]+n.data[2],o=t*n.data[1]+r*n.data[4]+n.data[5];return i+=a.originX,o+=a.originY,[i,o]}var a=this;e=e||{},a.rotation=e.rotation||0,a.x=e.x||0,a.y=e.y||0,a.scaleX=e.scaleX||1,a.scaleY=e.scaleY||1,a.originX=e.originX||0,a.originY=e.originY||0,a.points=e.points||[],a.calculatedPoints=[];var n=new Matrix2D;a.addPoint=function(e){a.points.push(e)},a.addPoints=function(e){a.points=a.points.concate(e)},a.update=function(e){n.clear(),n.translate(a.x,a.y),n.scale(a.scaleX,a.scaleY),n.rotate(MathUtils.toRadians(a.rotation)),a.calculatedPoints=[];for(var r=0;r<this.points.length;r++){var i=t(a.points[r]);a.calculatedPoints.push(i)}return e&&e(a.calculatedPoints),a.calculatedPoints}},ViewManager=new function(){var e=this,t=0;e.DATA_FLAG="data",e.dataDict={},e.getView=function(e){return Views[e]},e.getViewStyle=function(e){return ViewStyles[e]},e.render=function(t){if(!t.target||!t.viewName&&!t.viewContent)throw new Error("ViewManager: Please specify target and view name or view content.");return e.dataDict={},t.data&&(e.dataDict[e.DATA_FLAG]=t.data,delete t.data),e._doRender(t),e},e._doRender=function(e){e.placeHolderId="view_place_holder"+t,t++;var a=new ViewManager.renderThread(e);a.start()},e.renderArray=function(t){var a,n=t.arrayData;for(a=0;a<n.length;a++){e.dataDict[t.dataName]=n[a];var r={target:t.target,viewContent:t.viewContent,idSuffix:a};e._doRender(r)}}};ViewManager.renderThread=function(e){function t(e){var t,n=e.length;for(t=0;n>t;t++)a(e[t])}function a(e){var t=e.getAttribute("isLast");n(e),t&&(e.removeAttribute("isLast"),r())}function n(e){var a=e.id||"",n=e.getAttribute("accessId"),r=e,d=e;switch(""!==g&&(a&&(a+=g,e.id=a),n&&(n+=g)),e.tagName){case"RED-VIEW":var u=e.classList,f=e.getAttribute("type"),h=i(e);h.id=a,h.target=l;var y=new window[f](h),w=y instanceof HTMLElement?y:y.container?y.container:y.canvas;w.insertAdjacentHTML("beforeend",e.innerHTML),e.parentNode.replaceChild(w,e),r=w,d=y;for(var b=0;b<u.length;b++)r.classList.add(u[b]);break;case"RED-FOR-LOOP":var _=e.getAttribute("iteration-data-name"),S=i(e),C=o({id:"view_array_place_holder"+e.id,target:e.parentNode});e.parentNode.insertBefore(C,e),m.push(C);var x={target:C,viewContent:e.innerHTML,arrayData:S,dataName:_};e.parentNode.removeChild(e),r=null,c.renderArray(x);break;case"RED-IF-TRUE":case"RED-IF-FALSE":var x=i(e);"RED-IF-FALSE"===e.tagName&&(x=!x),x?m.push(e):(p.push(e),r=null)}if(r&&r.children.length>0&&t(r.children),d&&a){var T=s(a);adData.elements[T]=d}d&&n&&(v[n]=d)}function r(){var e,t=p.length;for(e=0;t>e;e++){var a=p[e];a.parentNode.removeChild(a)}for(t=m.length,e=0;t>e;e++){for(var a=m[e];a.firstChild;)a.parentNode.insertBefore(a.firstChild,a);a.parentNode.removeChild(a)}if(u)for(;l.firstChild;)u.appendChild(l.firstChild);l=null,h(v)}function i(e){var t=e.getAttribute("data");null===t&&(t="");var a=ObjectUtils.objectifier.get(t,c.dataDict);return void 0===a&&(a=ObjectUtils.objectifier.get(t,window)),a}function o(e){var t=document.createElement("div");return t.id=e.id,t}function s(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}var l,c=ViewManager,d=this,u=e.target,f=e.viewName,g=void 0!==e.idSuffix?e.idSuffix:"",h=e.callback||function(){},p=[],m=[],v={};d.start=function(){var a=e.viewContent||c.getView(f);if(e.simpleRender)u.insertAdjacentHTML("beforeend",a);else{l=o({id:e.placeHolderId,target:u}),l.innerHTML=a;var n=l.lastElementChild;n?(n.setAttribute("isLast",!0),t(l.children)):h()}f&&Styles.injectStylesheet("ViewStyles_"+f,window.ViewStyles[f])}},CanvasDrawer.prototype={_init:function(e){var t=this,a={left:0,top:0,width:e.css&&e.css.width?e.css.width:e.target&&"body"!==e.target?Styles.getCss(e.target,"width"):adParams.adWidth,height:e.css&&e.css.height?e.css.height:e.target&&"body"!==e.target?Styles.getCss(e.target,"height"):adParams.adHeight,background:e.debug===!0?"green":"",pointerEvents:"none"};if(e.css)for(var n in e.css)a[n]=e.css[n];e.subPixeling===!0&&(e.retina=!0),t.qualityScale=e.retina?2:1,t._imageScale=e.subPixeling?1:t.qualityScale,a.width*=t.qualityScale,a.height*=t.qualityScale,t.canvas=new UICanvas({id:"cd_"+e.id,target:e.target,css:a}),1!==t.qualityScale&&TweenLite.set(t.canvas,{scale:1/t.qualityScale,transformOrigin:"0% 0%"}),t.ctx=t.canvas.context2d,t.elements={},t._allTweens={},t._allTweensSize=0,t.elementsLength=0,t._dummyTween},get width(){return this.canvas.width/this.qualityScale},set width(e){this.canvas.width=e*this.qualityScale},get height(){return this.canvas.height/this.qualityScale},set height(e){this.canvas.height=e*this.qualityScale},removeElement:function(e){var t=this;t.elementsLength--,e.id?delete t.elements[e.id]:delete t.elements[e]},removeAllItems:function(){var e=this;for(var t in e.elements)e.elementsLength--,delete e.elements[t];e.elementsLength=0},update:function(){var e,t,a,n,r=this;r.ctx.clearRect(0,0,r.canvas.width,r.canvas.height);for(var i in r.elements)e=r.elements[i],e.isActive&&e.alpha>0&&(e.rotation=e.rotation%360,t=0!=e.rotation||1!=e.scaleX||1!=e.scaleY||1!=e.scale,a=e.alpha<1||"source-over"!=e.blendMode,n="arc"===e._type,r.ctx.save(),a&&(r.ctx.globalAlpha=e.alpha,r.ctx.globalCompositeOperation=e.blendMode),t&&(r.ctx.translate.apply(r.ctx,[(e.x+e._offsetX)*r.qualityScale,(e.y+e._offsetY)*r.qualityScale]),0!=e.rotation&&r.ctx.rotate(MathUtils.toRadians(e.rotation)),1==e.scaleX&&1==e.scaleY&&1==e.scale||(0===e.scaleX&&(e.scaleX=1e-6),0===e.scaleY&&(e.scaleY=1e-6),0===e.scale&&(e.scale=1e-6),r.ctx.scale(e.scaleX*e.scale,e.scaleY*e.scale))),r._drawShape(e,n,t),r.ctx.restore());e=null},start:function(){var e=this;FrameRate.register(e,e.update)},stop:function(){var e=this;FrameRate.unregister(e,e.update)},_drawShape:function(e,t,a){var n=this;e.shadowColor&&(e.shadowBlur>0||0!=e.shadowDistance)&&(n.ctx.shadowColor=e.shadowColor,n.ctx.shadowOffsetX=e._shadowOffsetX*n.qualityScale,n.ctx.shadowOffsetY=e._shadowOffsetY*n.qualityScale,n.ctx.shadowBlur=e.shadowBlur*n.qualityScale),e.draw(a,t)}};var CanvasTexture=new function(){var e=this;e.makeLinearGradient=function(e){for(var t=e.target.ctx.createLinearGradient(e.xStart*e.target.qualityScale,e.yStart*e.target.qualityScale,e.xEnd*e.target.qualityScale,e.yEnd*e.target.qualityScale),a=0;a<e.colors.length;a++)t.addColorStop(e.colors[a].stopVal,e.colors[a].color);return t},e.makeRadialGradient=function(e){for(var t=e.target.ctx.createRadialGradient(e.xInner*e.target.qualityScale,e.yInner*e.target.qualityScale,e.radiusInner*e.target.qualityScale,e.xOuter*e.target.qualityScale,e.yOuter*e.target.qualityScale,e.radiusOuter*e.target.qualityScale),a=0;a<e.colors.length;a++)t.addColorStop(e.colors[a].stopVal,e.colors[a].color);return t},e.makePattern=function(e){var t=e.source,a=e.repeat||"repeat",n=this._getIsSourceCanvas(t),r=n?"CANVAS"===t.tagName?t:t.canvas:"IMG"===t.tagName?t:ImageManager.get(t),i=e.target.ctx.createPattern(r,a);return i},e._getIsSourceCanvas=function(e){return"CANVAS"===e.tagName||"object"==typeof e&&void 0===e.tagName}},CanvasTweener=new function(){var e=this;e.init=function(e){var t=new CanvasTweenerBase;t.init(e.stage||e)}};CanvasTweenerBase.prototype={init:function(e){var t=this;t._drawer=e,t._drawer.tween={to:function(e,a,n){t._tweenEngine("to",[e,a,n])},from:function(e,a,n){t._tweenEngine("from",[e,a,n])},fromTo:function(e,a,n,r){t._tweenEngine("fromTo",[e,a,n,r])},set:function(e,a){t._tweenEngine("set",[e,a])},start:function(e){t._tweenStart(e)},kill:function(){t._tweenKill()}}},_tweenEngine:function(e,t){var a=this;t[0]="string"==typeof t[0]?a._drawer.elements[t[0]]:t[0];var n={to:2,from:2,fromTo:3,set:1};if(t[n[e]].transformOrigin&&(t[0].transformOrigin=t[n[e]].transformOrigin,delete t[n[e]].transformOrigin),"from"===e){e="to";var r,i={};for(var o in t[2])void 0!=t[0][o]&&(i[o]=t[2][o],t[2][o]=t[0][o],r=String(i[o]).replace(/=/g,""),r.indexOf("-")>=0||r.indexOf("+")>=0?t[0][o]+=parseInt(r):t[0][o]=parseInt(r))}t[t.length-1].paused=t[t.length-1].paused!==!1;var s=TweenLite[e].apply(a,t);a._drawer._allTweens["newTween"+a._drawer._allTweensSize++]=s,t[t.length-1].paused===!1&&a._tweenStart()},_tweenStart:function(e){var t,a=this,n=0,r=e||[];for(var i in a._drawer._allTweens)a._drawer._allTweens[i].delay(a._drawer._allTweens[i].delay()+(r.delay||0)),t=a._drawer._allTweens[i].duration()+a._drawer._allTweens[i].delay(),t>n&&(n=t),a._drawer._allTweens[i].play();a._drawer._dummyTween&&(n>t&&(t=n),a._drawer._dummyTween.kill());var o,s,l=null;r.onStart&&(l=function(){r.onStart.apply(this,r.onStartParams?r.onStartParams:null)}),o=r.onUpdate?function(){r.onUpdate.apply(this,r.onUpdateParams?r.onUpdateParams:null),a._drawer.update()}:a._drawer.update.bind(a._drawer),s=r.onComplete?function(){a._tweenKill(),r.onComplete.apply(this,r.onCompleteParams?r.onCompleteParams:null)}:a._tweenKill.bind(a),n+=r.timePadding&&r.timePadding>0?r.timePadding:0,a._drawer._dummyTween=TweenLite.to({},n,{onStart:l,onUpdate:o,onComplete:s,delay:r.delay||0})},_tweenKill:function(){var e=this;for(var t in e._drawer._allTweens)e._drawer._allTweens[t]&&e._drawer._allTweens[t].kill(),delete e._drawer._allTweens[t];e._drawer._allTweens={},e._drawer._allTweensSize=0,e._drawer._dummyTween&&e._drawer._dummyTween.kill(),e._drawer._dummyTween=null}},CanvasElement.prototype={get left(){return this.x},set left(e){this.x=e},get top(){return this.y},set top(e){this.y=e},get opacity(){return this.alpha},set opacity(e){this.alpha=e},get shadowAngle(){return this._shadowAngle},set shadowAngle(e){this._shadowAngle=e,this._setShadowOffsets()},get shadowDistance(){return this._shadowDistance},set shadowDistance(e){this._shadowDistance=e,this._setShadowOffsets()},get shadowColor(){return this._shadowColor},set shadowColor(e){this._shadowColor=null===e?null:ColorUtils.toRgbaString(e,this._shadowAlpha)},get shadowAlpha(){return this._shadowAlpha},set shadowAlpha(e){var t=this;t._shadowAlpha=e,t.shadowColor=t._shadowColor},get transformOrigin(){return this._transformOrigin},set transformOrigin(e){var t=this,a=e.split(" ")[0],n=e.split(" ")[1];switch(t._transformOrigin=e,a=a.indexOf("%")>=0?+a.replace(/%/g,"")/100:a.indexOf("px")>=0?+a.replace(/px/g,"")/t.width:+a/t.width,n=n.indexOf("%")>=0?+n.replace(/%/g,"")/100:n.indexOf("px")>=0?+n.replace(/px/g,"")/t.height:+n/t.height,t._type){case"arc":case"path":a-=.5,n-=.5;default:t._offsetX=t.width*a,t._offsetY=t.height*n;break;case"text":switch(t._transOffsetX=a,t._transOffsetY=n,t.textAlign){case"center":t._transOffsetX-=.5;break;case"right":t._transOffsetX*=-1}t._wrapText(!1,!1)}},toString:function(){return"[object CanvasElement]"},_setShadowOffsets:function(e,t){var a=this,n=MathUtils.toRadians(-1*a._shadowAngle+180);a._shadowOffsetX=parseInt((Math.cos(n)*a._shadowDistance).toFixed(8)),a._shadowOffsetY=parseInt((Math.sin(n)*a._shadowDistance).toFixed(8))}},CanvasImage.prototype=Object.create(CanvasElement.prototype),CanvasImage.prototype.constructor=CanvasImage,CanvasImage.prototype.draw=function(e){var t=this;try{e?t.stage.ctx.drawImage(t.src,t.sourceX,t.sourceY,t.sourceW,t.sourceH,-t._offsetX*t.stage.qualityScale,-t._offsetY*t.stage.qualityScale,t.width*t.stage.qualityScale,t.height*t.stage.qualityScale):t.stage.ctx.drawImage(t.src,t.sourceX,t.sourceY,t.sourceW,t.sourceH,t.x*t.stage.qualityScale,t.y*t.stage.qualityScale,t.width*t.stage.qualityScale,t.height*t.stage.qualityScale)}catch(e){console.log(""),console.log("")}},CanvasShape.prototype=Object.create(CanvasElement.prototype),CanvasShape.prototype.constructor=CanvasShape,CanvasShape.prototype._setDrawArgs=function(e,t){var a=this;switch(a._type){case"rect":e=[e.x||e.left||0,e.y||e.top||0,e.width||e.height,e.height||e.width];break;case"arc":var n=void 0===e.startAngle?e.startRad:MathUtils.toRadians(e.startAngle),r=void 0===e.endAngle?e.endRad:MathUtils.toRadians(e.endAngle);n||(n=0),r||(r=2*Math.PI),e=[e.x||e.left||0,e.y||e.top||0,e.width>=0?e.width/2:e.radius,n,r]}a.args=e,t=t||{},a._setShapeParams(e,t),a.transformOrigin=t.transformOrigin||("rect"===a._type?"0 0":"50% 50%")},CanvasShape.prototype.draw=function(e,t){var a=this;a.strokeDashSize>0&&a.strokeDashGap>0&&a.stage.ctx.setLineDash([a.strokeDashSize*a.stage.qualityScale,a.strokeDashGap*a.stage.qualityScale]),a.stage.ctx.lineDashOffset=a.strokeDashOffset;var n="outer"===a.strokePosition,r=a.strokeWidth>0;a.stage.ctx.beginPath(),a.stage.ctx.strokeStyle=a.strokeFill,a.stage.ctx.lineWidth=a.strokeWidth*a.stage.qualityScale*(n?2:1),a.stage.ctx.lineCap=a.strokeCap,a.stage.ctx.lineJoin=a.strokeJoin,a._prepDrawing(e),a.stage.ctx.closePath(),n&&r&&a.stage.ctx.stroke(),a.fill&&(a.stage.ctx.fillStyle=a.fill,a.stage.ctx.fill()),!n&&r&&a.stage.ctx.stroke()},CanvasRect.prototype=Object.create(CanvasShape.prototype),CanvasRect.prototype.constructor=CanvasRect,CanvasRect.prototype._setShapeParams=function(e){var t=this;t.x=e[0],t.y=e[1],t.width=e[2],t.height=e[3]},CanvasRect.prototype._prepDrawing=function(e){var t=this;e?(t.args[0]=-t._offsetX*t.stage.qualityScale,t.args[1]=-t._offsetY*t.stage.qualityScale):(t.args[0]=t.x*t.stage.qualityScale,t.args[1]=t.y*t.stage.qualityScale),t.args[2]=t.width*t.stage.qualityScale,t.args[3]=t.height*t.stage.qualityScale,t.stage.ctx.rect.apply(t.stage.ctx,t.args)},CanvasCircle.prototype=Object.create(CanvasShape.prototype),CanvasCircle.prototype.constructor=CanvasCircle,CanvasCircle.prototype._setShapeParams=function(e){var t=this;t.x=e[0],t.y=e[1],t.width=t.height=2*e[2]},CanvasCircle.prototype._prepDrawing=function(e){var t=this;e?(t.args[0]=-t._offsetX*t.stage.qualityScale,t.args[1]=-t._offsetY*t.stage.qualityScale):(t.args[0]=t.x*t.stage.qualityScale,t.args[1]=t.y*t.stage.qualityScale),t.args[2]=t.width/2*t.stage.qualityScale,t.args[2]<0&&(t.args[2]=0),t.stage.ctx.arc.apply(t.stage.ctx,t.args)},CanvasPath.prototype=Object.create(CanvasShape.prototype),CanvasPath.prototype.constructor=CanvasPath,CanvasPath.prototype._setLineDrawArgs=function(e){var t=this;if(e)t.drawArgs[e]={fun:t.args[e].fun,points:t.args[e].points.slice()};else for(var a=0;a<t.args.length;a++)t.drawArgs[a]={fun:t.args[a].fun,points:t.args[a].points.slice()}},CanvasPath.prototype._setShapeParams=function(e,t){var a=this;a.width=0,a.height=0,a.args=e.points,a.drawArgs=a.args.slice(),a._offsetX=1e8,a._offsetY=1e8;var n,r;for(n=0;n<a.args.length;n++)for(r=0;r<a.args[n].points.length;r+=2)a.args[n].points[r]*=a.drawScale,a.args[n].points[r+1]*=a.drawScale,a.args[n].points[r]<a._offsetX&&(a._offsetX=a.args[n].points[r]),a.args[n].points[r]>a.width&&(a.width=a.args[n].points[r]),a.args[n].points[r+1]<a._offsetY&&(a._offsetY=a.args[n].points[r+1]),a.args[n].points[r+1]>a.height&&(a.height=a.args[n].points[r+1]);for(a.width=a.width-a._offsetX,a.height=a.height-a._offsetY,n=0;n<a.args.length;n++){for(r=0;r<a.args[n].points.length;r+=2)a.args[n].points[r]-=a._offsetX+a.width/2,a.args[n].points[r+1]-=a._offsetY+a.height/2;a._setLineDrawArgs(n)}a.x=t.params.x>=0||t.params.x<=0?t.params.x:a._offsetX+a.width/2,a.y=t.params.y>=0||t.params.y<=0?t.params.y:a._offsetY+a.height/2},CanvasPath.prototype._prepDrawing=function(e){var t,a,n=this;for(t=0;t<n.args.length;t++)for(a=0;a<n.args[t].points.length;a+=2)e?(n.drawArgs[t].points[a]=(n.args[t].points[a]-n._offsetX)*n.stage.qualityScale,n.drawArgs[t].points[a+1]=(n.args[t].points[a+1]-n._offsetY)*n.stage.qualityScale):(n.drawArgs[t].points[a]=(n.args[t].points[a]+n.x)*n.stage.qualityScale,n.drawArgs[t].points[a+1]=(n.args[t].points[a+1]+n.y)*n.stage.qualityScale);for(t=0;t<n.drawArgs.length;t++)n.stage.ctx[n.drawArgs[t].fun].apply(n.stage.ctx,n.drawArgs[t].points)},CanvasText.prototype=Object.create(CanvasElement.prototype),CanvasText.prototype.constructor=CanvasText,CanvasText.prototype.draw=function(e){var t=this;t._wrapText(e)},CanvasText.prototype._wrapText=function(e,t){var a=this,n=t===!1,r="empty";if(!n)for(var i in a.deltaProps)if(a.deltaProps[i]!=a[i]){r=i,n=!0;break}if(n){a.stage.ctx.font=a.fontSize+"px "+a.fontFamily,a.deltaProps.strokeOffset=("outer"===a.strokePosition||"center"===a.strokePosition?a.strokeWidth/4:0)*a.stage.qualityScale,a.drawProps.offsetX=("right"===a.textAlign?-1:1)*a.deltaProps.strokeOffset,a.drawProps.offsetY=a.deltaProps.strokeOffset;for(var o,s,l=String(a.copy.split(" ")),c="",d=0,u=[],f=0;f<l.length;f++)o=c+l[f]+" ",s=a.stage.ctx.measureText(o).width,s>a.maxWidth&&f>0?(s=a.stage.ctx.measureText(c).width,s>d&&(d=s),u.push({copy:c,y:a.drawProps.offsetY}),c=l[f],a.drawProps.offsetY+=a.lineHeight):(c=o,s>d&&(d=s));u.push({copy:c,y:a.drawProps.offsetY}),a.drawProps.copy=u.slice(),a._width=d+a.deltaProps.strokeOffset,a._height=(a.drawProps.copy.length-1)*a.lineHeight+a.fontSize,a._offsetX=a._width*a._transOffsetX,a._offsetY=a._height*a._transOffsetY;for(i in a.deltaProps)a.deltaProps[i]=a[i]}if(e?a._translateOffset===!0&&(a._translateOffset=!1):a._translateOffset=!0,t!==!1){var g=-a.drawProps.offsetX,h=0,p=a._x,m=a._y;e&&(g=a._offsetX-a._marginLeft,h=a._offsetY-a._marginTop,p=0,m=0);var v;for(f=0;f<a.drawProps.copy.length;f++)v=a.drawProps.copy[f].copy,a._drawText(v,p-g,m+a.drawProps.copy[f].y-h)}},CanvasText.prototype._drawText=function(e,t,a){var n=this,r="outer"===n.strokePosition,i=n.strokeWidth>0;n.strokeDashSize>0&&n.strokeDashGap>0&&n.stage.ctx.setLineDash([n.strokeDashSize*n.stage.qualityScale,n.strokeDashGap*n.stage.qualityScale]),n.stage.ctx.lineDashOffset=n.strokeDashOffset,n.stage.ctx.lineJoin=n.strokeJoin,n.stage.ctx.font=n.fontSize*n.stage.qualityScale+"px "+n.fontFamily,n.stage.ctx.fillStyle=n.fill,n.stage.ctx.strokeStyle=n.strokeFill,n.stage.ctx.textAlign=n.textAlign,n.stage.ctx.textBaseline="top",n.stage.ctx.lineWidth=n.strokeWidth*n.stage.qualityScale*(r?2:1),r&&i&&n.stage.ctx.strokeText(e,t*n.stage.qualityScale,a*n.stage.qualityScale),n.stage.ctx.fillText(e,t*n.stage.qualityScale,a*n.stage.qualityScale),!r&&i&&n.stage.ctx.strokeText(e,t*n.stage.qualityScale,a*n.stage.qualityScale)};var CanvasBlendMode=new function(){return{NONE:"source-over",UNDER:"destination-over",SOURCE_IN:"source-in",SOURCE_OUT:"source-out",SOURCE_ATOP:"source-atop",DEST_IN:"destination-in",DEST_OUT:"destination-out",DEST_ATOP:"destination-atop",XOR:"xor",COPY:"copy",ADD:"lighter",DARKEN:"darken",LIGHTEN:"lighten",OVERLAY:"overlay",MULTIPLY:"multiply",SCREEN:"screen",DODGE:"color-dodge",BURN:"color-burn",HARD:"hard-light",SOFT:"soft-light",DIFFERENCE:"difference",EXCLUSION:"exclusion",HUE:"hue",SATURATION:"saturation",COLOR:"color",LUMINOSITY:"luminosity"}},CanvasTiling=new function(){return{COVER:"repeat",X:"repeat-x",Y:"repeat-y",NONE:"no-repeat"}},CanvasLineTo=new function(){return{MOVE:"moveTo",LINE:"lineTo",QUAD:"quadraticCurveTo",BEZIER:"bezierCurveTo",ARC:"arcTo"}},CanvasUtils=new function(){var e=this;e.getImageData=function(e){return e=e.canvas||e,e.context2d.getImageData(0,0,e.width,e.height)},e.setImageData=function(e,t){e=e.canvas||e,e.context2d.putImageData(t,0,0)}},CanvasBlur=new function(){function e(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}for(var t=this,a=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],n=[1,1,2,2,4,4,7,9,14,18,27,37,54,74],r=[9],i=0;i<n.length;i++){for(var o=[],s=0;s<n[i];s++)o.push(i+11);r=r.concat(o)}t.blur=function(t){if(t.target=t.target.stage||t.target,(t.clear||0===t.amount)&&t.target.update&&t.target.update(),!(isNaN(t.amount)||t.amount<1)){t.amount|=0;var n=t.target.width,i=t.target.height;try{var o=CanvasUtils.getImageData(t.target)}catch(e){throw new Error("Unable to access image data, try a Local Server or network connection: "+e)}var s,l,c,d,u,f,g,h,p,m,v,y,w,b,_,S,C,x,T,E,A,D,k,O,L=o.data,I=t.amount+t.amount+1,M=n-1,P=i-1,R=t.amount+1,U=R*(R+1)/2,F=new e,G=F;
for(c=1;I>c;c++)if(G=G.next=new e,c==R)var j=G;G.next=F;var N=null,B=null;g=f=0;var q=a[t.amount],z=r[t.amount];for(l=0;i>l;l++){for(S=C=x=T=h=p=m=v=0,y=R*(E=L[f]),w=R*(A=L[f+1]),b=R*(D=L[f+2]),h+=U*E,p+=U*A,m+=U*D,t.alpha&&(_=R*(k=L[f+3]),v+=U*k),G=F,c=0;R>c;c++)G.r=E,G.g=A,G.b=D,t.alpha&&(G.a=k),G=G.next;for(c=1;R>c;c++)t.alpha&&(v+=(G.a=k=L[d+3])*O,T+=k),d=f+((c>M?M:c)<<2),h+=(G.r=E=L[d])*(O=R-c),p+=(G.g=A=L[d+1])*O,m+=(G.b=D=L[d+2])*O,S+=E,C+=A,x+=D,G=G.next;for(N=F,B=j,s=0;n>s;s++)t.alpha?(L[f+3]=k=v*q>>z,0!=k?(k=255/k,L[f]=(h*q>>z)*k,L[f+1]=(p*q>>z)*k,L[f+2]=(m*q>>z)*k):L[f]=L[f+1]=L[f+2]=0):(L[f]=h*q>>z,L[f+1]=p*q>>z,L[f+2]=m*q>>z),h-=y,p-=w,m-=b,y-=N.r,w-=N.g,b-=N.b,t.alpha&&(v-=_,_-=N.a),d=g+((d=s+t.amount+1)<M?d:M)<<2,S+=N.r=L[d],C+=N.g=L[d+1],x+=N.b=L[d+2],h+=S,p+=C,m+=x,y+=E=B.r,w+=A=B.g,b+=D=B.b,S-=E,C-=A,x-=D,t.alpha&&(T+=N.a=L[d+3],v+=T,_+=k=B.a,T-=k),N=N.next,B=B.next,f+=4;g+=n}for(s=0;n>s;s++){for(C=x=T=S=p=m=v=h=0,f=s<<2,y=R*(E=L[f]),w=R*(A=L[f+1]),b=R*(D=L[f+2]),h+=U*E,p+=U*A,m+=U*D,t.alpha&&(_=R*(k=L[f+3]),v+=U*k),G=F,c=0;R>c;c++)G.r=E,G.g=A,G.b=D,t.alpha&&(G.a=k),G=G.next;for(u=n,c=1;c<=t.amount;c++)f=u+s<<2,h+=(G.r=E=L[f])*(O=R-c),p+=(G.g=A=L[f+1])*O,m+=(G.b=D=L[f+2])*O,S+=E,C+=A,x+=D,t.alpha&&(v+=(G.a=k=L[f+3])*O,T+=k),G=G.next,P>c&&(u+=n);for(f=s,N=F,B=j,l=0;i>l;l++)d=f<<2,t.alpha?(L[d+3]=k=v*q>>z,k>0?L[d]=(h*q>>z)*(k=255/k):L[d]=L[d+1]=L[d+2]=0):(k=1,L[d]=h*q>>z),L[d+1]=(p*q>>z)*k,L[d+2]=(m*q>>z)*k,h-=y,p-=w,m-=b,y-=N.r,w-=N.g,b-=N.b,d=s+((d=l+R)<P?d:P)*n<<2,h+=S+=N.r=L[d],p+=C+=N.g=L[d+1],m+=x+=N.b=L[d+2],y+=E=B.r,w+=A=B.g,b+=D=B.b,S-=E,C-=A,x-=D,t.alpha&&(v-=_,_-=N.a,v+=T+=N.a=L[d+3],_+=k=B.a,T-=k),N=N.next,B=B.next,f+=n}CanvasUtils.setImageData(t.target,o)}}},CanvasColoring=new function(){function e(e){if(e.color&&(e.color=ColorUtils.toRgba(e.color),void 0===e.color.r))throw new Error("The color passed to CanvasColorUtils does not meet the HEX or RGB/A definition requirement: given '"+e.color+"'");e.target=e.target.stage||e.target,e.amount=void 0===e.amount?1:e.amount,e.clear&&e.target.update&&e.target.update();var t,n,r,i=CanvasUtils.getImageData(e.target),o=i.data;for(n=0;n<o.length;n+=4)for(t=ColorUtils[e.type]({from:{r:o[n],g:o[n+1],b:o[n+2]},to:e.color||null,amount:e.amount,format:"object"}),r=0;3>r;r++)o[n+r]=t[a[r]];CanvasUtils.setImageData(e.target,i)}var t=this,a=["r","g","b"];t.saturation=function(t){t.type="saturation",e(t)},t.contrast=function(t){t.type="contrast",e(t)},t.tint=function(t){t.type="tint",e(t)},t.transform=function(t){t.type="transform",e(t)},t.invert=function(t){t.type="invert",e(t)}},TextUtils=new function(){var e=this;e.autosizeTF=function(e,t){var a=void 0;a=e.id?Markup.get(e):e.textfield;var n=Markup.getParent(a);t=t||1;var r=void 0,i=void 0,o=Styles.getWidth(n);if(Styles.getWidth(a)>o)for(;Styles.getWidth(a)>o;)r=void 0===r?Styles.getCss(a,"font-size"):r-1,Styles.setCss(a,"font-size",r),i=r*t,Styles.setCss(a,"line-height",i);var s=Styles.getHeight(n);if(Styles.getHeight(a)>s)for(;Styles.getHeight(a)>s;)r=void 0===r?Styles.getCss(a,"font-size"):r-1,Styles.setCss(a,"font-size",r),i=r*t,Styles.setCss(a,"line-height",i);return Styles.getWidth(a)>o||Styles.getHeight(a)>s?void TextUtils.autosizeTF(a):r?r:Styles.getCss(a,"font-size")},e.fitContainerToText=function(e,t,a){Markup.get(e);if(t){var n=Styles.getWidth(e.textfield);Styles.setCss(e.parent,"width",n),Styles.setCss(e.parent,"left",parseInt(e.textfield.containerData.margin)/2);var r=parseInt(n+parseInt(e.textfield.containerData.margin));Styles.setCss(e.container,"width",r)}else if(a){var i=Styles.getHeight(e.textfield);Styles.setCss(e.parent,"height",i),Styles.setCss(e.container,"height",i)}},e.matchTeamNameSize=function(e,t){var a=TextUtils.autosizeTF(e),n=TextUtils.autosizeTF(t),r=a>n?n:a;Styles.setCss(e,{fontSize:r}),Align.moveX(Align.CENTER,e),Styles.setCss(t,{fontSize:r}),Align.moveX(Align.CENTER,t)},e.addText=function(e,t){var a="string"==typeof e?Markup.get(e):e;a.innerHTML=t},e.hasText=function(e){var t="string"==typeof e?Markup.get(e):e;return t.innerHTML.length>0},e.numlines=function(e){"string"==typeof e?Markup.get(e):e;return Styles.getCss(e,"height")/Styles.getCss(e,"line-height")},e.addSpaces=function(e){for(var t="",a=0;e>a;a++)t+="&nbsp;";return t},e.getSpecialCharacter=function(t,a){t=global.proxyStringToLowerCase.apply(t);for(var n=0;n<e.specialChars.length;n++){var r=global.proxyStringToLowerCase.apply(e.specialChars[n].label);if(r===t)return a?e.specialChars[n].upperCase:e.specialChars[n].lowerCase}return!1},e.specialCharacters=[{label:"iexcl",upperCase:"&#161;",lowerCase:"&#161;"},{label:"trademark",upperCase:"&#153;",lowerCase:"&#153;"},{label:"copyright",upperCase:"&#169;",lowerCase:"&#169;"},{label:"registered",upperCase:"&#174;",lowerCase:"&#174;"},{label:"nTilde",upperCase:"&#209;",lowerCase:"&#241;"},{label:"aAccent",upperCase:"&#193;",lowerCase:"&#225;"},{label:"eAccent",upperCase:"&#201;",lowerCase:"&#233;"},{label:"iAccent",upperCase:"&#205;",lowerCase:"&#237;"},{label:"oAccent",upperCase:"&#211;",lowerCase:"&#243;"},{label:"uAccent",upperCase:"&#218;",lowerCase:"&#250;"}],e.trimStartAndEnd=function(e){return e?e.replace(/^\s\s*/,"").replace(/\s\s*$/,""):""},e.removeSpaces=function(e){return e.split(" ").join("")},e.pad=function(e,t){var a="";for(0>e&&(a="-"),e=e.toString().replace(/\-/,"",e);e.length<t;)e="0"+e;return a+e}},NetUtils=new function(){this.getQueryParameterBy=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",a=new RegExp(t),n=a.exec(window.location.search);return null==n?"":decodeURIComponent(n[1].replace(/\+/g," "))}},ImageUtils=new function(){var e=this;e.fitImageAtCoordinate=function(e,t,a){var n=new Image;void 0===t&&void 0===a?e.style.backgroundPosition="50% 50%":n.onload=function(){function r(t,a){var r=o[t]*(n[a]/n[t]),s=o[t]/n[t],l=o[a]/2-i[a]*s,c=o[a]-r;l>0?l=0:c>l&&(l=c),e.style.backgroundPosition="height"===t?l+"px 0px":"0px "+l+"px"}var i={width:t||0,height:a||0},o={width:e.offsetWidth,height:e.offsetHeight},s=o.width/o.height,l=n.width/n.height;s>l?r("width","height"):l>s&&r("height","width")},n.src=e.style.backgroundImage.replace(/url\((['"])?(.*?)\1\)/gi,"$2").split(",")[0],e.style.backgroundSize="cover",e.style.backgroundRepeat="no-repeat"}},MathUtils=function(){function e(e){return Math.PI/180*e}function t(e){return 180/Math.PI*e}function a(e,t,a){t=t||0,a=void 0!=a&&a>0?a:1;var n=Math.min(e,t),r=Math.max(e,t);n=Math.ceil(n/a)*a,r=Math.floor(r/a)*a;var i=n+Math.floor(Math.random()*((r-n+a)/a))/(1/a);return i}function n(e){return e=e||.5,Math.random()<e}function r(e,t,a,n,r){return(r-a)/(n-a)*(t-e)+e}function i(e,t,a){var n=Math.min(t,a),r=Math.max(t,a);return r>=e&&e>=n}function o(e){return!isNaN(e)}function s(e){return+e}function l(e,t,a){return Math.max(t,Math.min(a,e))}function c(e,t,a,n){var e=e+Math.cos(n)*a,t=t+Math.sin(n)*a;return[e,t]}function d(e,t,a,n){return a=a||0,n=n||0,Math.atan2(n-t,a-e)}function u(e,t,a,n){return a=a||0,n=n||0,Math.sqrt((n-t)*(n-t)+(a-e)*(a-e))}return{toRadians:e,toDegrees:t,random:a,randomBoolean:n,rel:r,inRange:i,isNumber:o,toNumber:s,restrict:l,getAnglePoint:c,getAngle:d,getDistance:u}}(),ArrayUtils=function(){function e(e,t){return e.concat(t)}function t(e){return e.slice()}function a(e,t){var a=e.slice(0,t),n=e.slice(t,e.length),r=Array.prototype.slice.call(arguments),i=r.slice(2,r.length);return a.concat(i).concat(n)}function n(e,a){var n=t(e);return n.splice(a,1),n}function r(e,t){for(var a=e.slice();a.indexOf(t)>=0;)a=n(a,a.indexOf(t));return a}function i(e){return e.sort(function(){return Math.random()<.5?1:-1})}function o(e,t){return e.indexOf(t)>=0}return{combine:e,copy:t,insertAt:a,shuffle:i,removeAt:n,remove:r,contains:o}}(),ColorUtils=new function(){function e(e){return e.from=e.from||e.color,e.from&&"object"!=typeof e.from&&(e.from=ColorUtils.toRgba(e.from)),e.to&&"object"!=typeof e.to&&(e.to=ColorUtils.toRgba(e.to)),e.amount=void 0===e.amount?1:e.amount,e}var t=this;t.toRgba=function(e,t){switch(typeof e){case"object":e=e||{r:0,g:0,b:0,a:1};break;default:if(e.indexOf("rgb")>=0)e=e.substring(e.indexOf("(")+1,e.lastIndexOf(")")).split(/,\s*/),e={r:e[0],g:e[1],b:e[2],a:Number(e[3])};else{if(!(e.indexOf("#")>=0))return console.log(""),console.log(""),e;var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e);e=a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16),a:a[4]?Number(a[4],16):1}:null}}return e.a||(e.a=1),t>=0&&(e.a=t),e},t.toRgbaString=function(e,a){var e=t.toRgba(e,a);return"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"},t.saturation=function(a){delete a.to,a=e(a);var n={};for(var r in a.from)if("a"===r)n[r]=a.from[r];else{if("r"===r){var i=0,o=255;for(var s in a.from)a.from[s]>i&&(i=a.from[s]),a.from[s]<o&&(o=a.from[s])}n[r]=Math.round(a.from[r]*a.amount+(1-a.amount)*((i+o)/2))}return"object"===a.format?n:t.toRgbaString(n)},t.contrast=function(a){delete a.to,a=e(a);var n={};for(var r in a.from)n[r]="a"===r?a.from[r]:Math.round(a.from[r]*a.amount);return"object"===a.format?n:t.toRgbaString(n)},t.tint=function(a){a=e(a);var n={};for(var r in a.from)n[r]="a"===r?a.from[r]:Math.round(a.from[r]+(a.to[r]-a.from[r])*a.amount);return"object"===a.format?n:t.toRgbaString(n)},t.transform=function(a){a=e(a);var n={};for(var r in a.from)n[r]="a"===r?a.from[r]:Math.round(a.from[r]-(255-a.to[r])*a.amount);return"object"===a.format?n:t.toRgbaString(n)},t.invert=function(a){delete a.to,delete a.amount,a=e(a);var n={};for(var r in a.from)n[r]="a"===r?a.from[r]:255-a.from[r];return"object"===a.format?n:t.toRgbaString(n)}},ObjectUtils=new function(){var e=this;e.objectifier={},e.objectifier.get=function(t,a){a=a||window;var n=e.objectifier._getSplits(t).splits;return e.objectifier._getProperty(n,a)},e.objectifier.set=function(t,a,n){n=n||window;var r=e.objectifier._getSplits(t,!0),i=e.objectifier._getProperty(r.splits,n);i[r.lastKey]=a},e.objectifier._getSplits=function(e,t){var a=e.split("."),n=t?a.pop():null;return{splits:a,lastKey:n}},e.objectifier._getProperty=function(e,t){var a,n,r=t||{};for(a=0;r&&(n=e[a]);a++)r=n in r?r[n]:void 0;return r},e.clone=function(t){if("[object Object]"!==Object.prototype.toString.call(t))return t;var a=t.constructor();for(var n in t)a[n]=e.clone(t[n]);return a},e.default=function(t,a,n){t=t||{};var r=e.clone(t);for(var i in a){var o=a[i];void 0===r[i]?r[i]=a[i]:n&&"[object Object]"===Object.prototype.toString.call(o)&&(r[i]=e.default(r[i],o,n))}return r}},Align_old=function(){function e(e,t,a,r){Styles.setCss(Markup.getElement(t),n(e,t,a,r))}function t(e,t,a){if(e!=Align.TOP&&e!=Align.BOTTOM){var r=n(e,t,a);delete r.y,Styles.setCss(Markup.getElement(t),r)}}function a(e,t,a){if(e!=Align.LEFT&&e!=Align.RIGHT){var r=0,i=a;e!=Align.TOP&&e!=Align.BOTTOM||(r=a);var o=n(e,t,r,i);delete o.x,Styles.setCss(Markup.getElement(t),o)}}function n(e,t,a,n){var o=Markup.getElement(t);a=a||0,n=n||0;var s=[a,n];return e==Align.TOP||e==Align.BOTTOM?s=[0,a]:e!=Align.LEFT&&e!=Align.RIGHT||(s[1]=0),{x:r(e,o.offsetWidth,o.parentNode.offsetWidth)+s[0],y:i(e,o.offsetHeight,o.parentNode.offsetHeight)+s[1]}}function r(e,t,a){e=e||Align.CENTER;var n=0;switch(e){case Align.BOTTOM_RIGHT:case Align.RIGHT:case Align.TOP_RIGHT:n=a-t;break;case Align.CENTER:case Align.TOP:case Align.BOTTOM:n=(a-t)/2;break;default:n=0}return n}function i(e,t,a){e=e||Align.CENTER;var n=0;switch(e){case Align.BOTTOM:case Align.BOTTOM_LEFT:case Align.BOTTOM_RIGHT:n=a-t;break;case Align.CENTER:case Align.LEFT:case Align.RIGHT:n=(a-t)/2;break;default:n=0}return n}return{BOTTOM:"alignBottom",BOTTOM_LEFT:"alignBottomLeft",BOTTOM_RIGHT:"alignBottomRight",CENTER:"alignCenter",LEFT:"alignLeft",RIGHT:"alignRight",TOP:"alignTop",TOP_LEFT:"alignTopLeft",TOP_RIGHT:"alignTopRight",move:e,moveX:t,moveY:a,calculate:n,horizontal:r,vertical:i,centerHorizontal:function(e,a,r){return r?n(Align.CENTER,e,a).left:t(Align.CENTER,e,a)},centerVertical:function(e,t,a){var n=Markup.getElement(e);t=t||0;var r=i(Align.CENTER,n.offsetHeight,n.parentNode.offsetHeight)+t;return a?r:Styles.setCss(n,{top:r})},left:function(e,a,r){return r?n(Align.LEFT,e,a).left:t(Align.LEFT,e,a)},right:function(e,a,r){return r?n(Align.RIGHT,e,a).left:t(Align.RIGHT,e,a)},top:function(e,t,r){return r?n(Align.TOP,e,t).top:a(Align.TOP,e,t)},bottom:function(e,t,r){return r?n(Align.BOTTOM,e,t).top:a(Align.BOTTOM,e,t)}}}(),Effects=function(){function e(e){e.amount>=0&&Styles.setCss(e.target,{filter:"blur("+e.amount+"px)"})}function t(e){Styles.setCss(e.target,{boxShadow:o(e.angle||0,e.distance||0,e.size||0,e.spread||0,e.color||"#000000",e.alpha,e.inner)})}function a(e){Styles.setCss(e.target,{textShadow:o(e.angle||0,e.distance||0,e.size||0,null,e.color||"#000000",e.alpha)})}function n(e){e.angle=0,e.distance=0,t(e)}function r(e){Styles.setCss(e.target,{background:"linear-gradient("+(e.angle||0)+"deg, "+e.colors.toString()+")"})}function i(e){Styles.setCss(e.target,{background:"radial-gradient("+e.colors.toString()+")"})}function o(e,t,a,n,r,i,o){var s="",l=-1*e+180,c=MathUtils.toRadians(l);return s+=(Math.cos(c)*t).toFixed(8)+"px ",s+=(Math.sin(c)*t).toFixed(8)+"px ",s+=a+"px",n&&(s+=" "+n+"px"),s+=" "+ColorUtils.toRgbaString(r,i),o=!!o,o&&(s+=" inset"),s}return{blur:e,dropShadow:t,textDropShadow:a,linearGradient:r,radialGradient:i,glow:n}}(),Ratio=function(){function e(e,t,a,n){if(e=e||this.EXACT,n||(n={width:0,height:0}),e==this.EXACT)n.width=t.width,n.height=t.height;else if(e==this.STRETCH)n.width=a.width,n.height=a.height;else{var r=t.width/t.height,i=a.width/a.height,o=e==this.FILL?r:i,s=e==this.FILL?i:r;s>o?(n.height=t.height/(t.width/a.width),n.width=a.width):(n.width=t.width/(t.height/a.height),n.height=a.height)}return n}return{resize:e,EXACT:"auto",FILL:"cover",FIT:"contain",STRETCH:"100% 100%"}}(),Clamp=function(){function e(e,a,n){var r=Markup.get(e),i=r.childNodes,o=[],s={};/(x)/gi.exec(a)&&(s.x={}),/(y)/gi.exec(a)&&(s.y={});for(var l=0;l<i.length;l++){var c=i[l];o[l]={};for(var d in s){var u=Styles.getCss(c,d),f=c[t[d][0]],g=u+f,h=s[d];0==l&&(h.min=u,h.max=g),u<h.min&&(h.min=u),h.max<g&&(h.max=g),o[l][d]=u}}var p={top:0,bottom:0,left:0,right:0};if(n)for(var m in p)p[m]=isNaN(n)?n[m]||0:n;var v={};for(var d in s){var y=s[d];v[d]=y.min+Styles.getCss(r,d)-p[t[d][2]],v[t[d][1]]=y.max-y.min+p[t[d][2]]+p[t[d][3]]}for(Styles.setCss(r,v),l=0;l<i.length;l++){var c=i[l],v={};for(var d in s)v[d]=o[l][d]-s[d].min+p[t[d][2]];Styles.setCss(c,v)}}var t={x:["offsetWidth","width","left","right"],y:["offsetHeight","height","top","bottom"]};return{X:"clampX",Y:"clampY",XY:"clampXY",set:e}}(),LocationUtils=new function(){this.gpsSuccessCallback,this.gpsFailCallback,this.getGPSData=function(e,t){navigator.geolocation&&(LocationUtils.gpsSuccessCallback=e,LocationUtils.gpsFailCallback=t,navigator.geolocation.getCurrentPosition(LocationUtils.onLocationRetrieved,LocationUtils.onLocationFailed))},this.onLocationRetrieved=function(e){LocationUtils.gpsSuccessCallback(e.coords)},this.onLocationFailed=function(e){switch(e.code){case 0:break;case 1:break;case 2:break;case 3:}LocationUtils.gpsFailCallback&&LocationUtils.gpsFailCallback(e)}},MotionUtils=function(){function e(e,t,a,n){o=e,s=t,l=a,c=n}function t(e){m=0>=e?1:e}function a(e){d=e,window.addEventListener("deviceorientation",i,!1)}function n(){window.removeEventListener("deviceorientation",i,!1)}function r(){p=!0}function i(e){switch(window.orientation){case-90:f=e.gamma,u=-e.beta;break;case 90:f=-e.gamma,u=e.beta;break;case 180:f=-e.beta,u=-e.gamma;break;default:f=e.beta,u=e.gamma}p&&(g=u,h=f,p=!1),u-=g,f-=h,u*=m,f*=m,o&&o>u&&(u=o),s&&u>s&&(u=s),l&&l>f&&(f=l),c&&f>c&&(f=c),d(u,f)}var o,s,l,c,d,u=0,f=0,g=0,h=0,p=!0,m=1;return{ax:u,ay:f,callibrate:r,setSpeedLimits:e,setSpeedMultiplier:t,activate:a,deactivate:n}}(),PrepareCommon=new function(){var e,t,a=this;a.init=function(n){t=n,e=new Async,e.onComplete(a.initComplete),a.prepareMonet(),e.start()},a.prepareMonet=function(){e.wait(),"undefined"==typeof monetData?a.loadMonet():a.loadMonetBackup()},a.loadMonet=function(){var e=Monet.buildMonetRequest();Monet.load(e,a.handleMonetLoadComplete,a.loadMonetBackup)},a.handleMonetLoadComplete=function(e){Monet.logEvent("MONET_ASSETS_LOADED"),a.prepareMonetData(e)},a.hasLoadedBackup=!1,a.loadMonetBackup=function(e){new DataLoader(adParams.adPath+"backup.json",{onComplete:function(e){Monet.logEvent("BACKUP_ASSETS_LOADED"),a.hasLoadedBackup=!0,a.prepareMonetData(JSON.parse(e.dataRaw))},onFail:function(){Monet.logEvent("MONET_DATA_ERROR",{error:'"backup.json" unable to be loaded'}),failAd()}}).load()},a.prepareMonetData=function(t){global.monetData=new MonetData,monetData.init(t),a.addMonetImagesToLoadQueue(),a.prepareMonetMisc(),e.done()},a.addMonetImagesToLoadQueue=function(){var e=monetData.getAssetsByType("image");for(var t in e)e[t].id.indexOf(adParams.adSize)>-1&&""!=e[t].url&&monetData.addLoadedImageId(e[t].id,ImageManager.addToLoad(e[t].url));var a=monetData.getAssetsByType("image",new RegExp("Ratings_Bug","i"));for(var n in a)""!=a[n].url&&monetData.addLoadedImageId(a[n].id,ImageManager.addToLoad(a[n].url))},a.prepareMonetMisc=function(){},a.initComplete=function(){a.prepareAdData(),a.loadImageQueue()},a.prepareAdData=function(){global.adData=new AdData(global.adParams.currentJsonData)},a.loadImageQueue=function(){ImageManager.load(a.onLoadAllImagesComplete,global.handleMonetError)},a.onLoadAllImagesComplete=function(){t()}},EdgeData=function(e){var t=this;e=e||{},t.getMaskCssFor=function(e){return"-webkit-clip-path: "+t.convertMaskShapeToMaskCss(t.getMaskShapeBy(e).update())},t.getMaskShapeBy=function(e){for(var t in maskShapes)if(t==e)return maskShapes[t]},t.convertMaskShapeToMaskCss=function(e){for(var t="polygon( ",a=0;a<e.length;a++)t+=String(e[a][0])+"px "+String(e[a][1])+"px, ";return t.slice(0,t.length-2)+" )"}},ViewStyles={},Views={},Control=new function(){this.prepareBuild=function(){Control.preMarkup(),View.buildMarkup(),View.buildBorder(),Control.postMarkup(),Monet.logEvent("MONET_IMPRESSION",{type:adParams.netflixMonet.type,skills:adParams.netflixMonet.skills}),Animation.startAd(),Animation.startScene()},this.preMarkup=function(){Gesture.addEventListener(adData.elements.redAdContainer,GestureEvent.CLICK,function(){logMonetClick(adData.elements.redAdContainer.id,{x:event.pageX,y:event.pageY}),Network.exit(overridePlatformExit,monetData.get("url.exit"))})},this.postMarkup=function(){}},View=new function(){this.buildMarkup=function(){adData.elements.key_art=new UIImage({id:"key_art",target:adData.elements.redAdContainer,source:monetData.get("image.key_art_300x250"),css:{x:0,y:0},retina:!0}),adData.elements.logo=new UIImage({id:"logo",target:adData.elements.redAdContainer,source:monetData.get("image.logo_300x250"),css:{x:0,y:0},retina:!0}),adData.elements.tune_in_text=new UITextField({target:adData.elements.redAdContainer,id:"tune_in_text",css:{x:182,y:170,width:106,height:45,color:"#000000"},fontSize:17,fontFamily:"ProximaNovaABold",format:TextFormat.PARAGRAPH_FIT,alignText:Align.CENTER,bufferText:{top:2},leading:-2,spacing:-.6,text:monetData.get("text.tune_in")}),adData.elements.cta_bg=new UIDiv({id:"cta_bg",target:adData.elements.redAdContainer,css:{x:182,y:215,width:106,height:27,backgroundColor:"#e50914"}}),adData.elements.cta_text=new UITextField({target:adData.elements.cta_bg,id:"cta_text",css:{width:106,height:27,color:"#f5f5f1"},fontSize:11,fontFamily:"ProximaNovaABold",format:TextFormat.INLINE_FIT,alignText:Align.CENTER,bufferText:{top:1},spacing:0,text:monetData.get("text.cta")}),monetData.hasValue("image.Ratings_Bug_20x20")&&new UIImage({id:"ratingsBug",target:adData.elements.redAdContainer,source:monetData.get("image.Ratings_Bug_20x20"),css:{x:0,y:0,width:20,height:20},align:{x:{type:Align.LEFT,offset:5},y:{type:Align.BOTTOM,offset:-5}}}),adData.elements.colorShape=new UIComponent({id:"ribbonTransition",target:adData.elements.redAdContainer,css:{x:0,y:0,width:300,height:250,backgroundColor:"#f5f5f1"}}),adData.elements.ribbonTransition=new UIComponent({id:"ribbonTransition",target:adData.elements.redAdContainer,css:{x:0,y:0,width:300,height:250}}),adData.elements.ribbon1=new UIComponent({id:"ribbon1",target:adData.elements.ribbonTransition,css:{x:0,y:0,width:115,height:250,backgroundColor:"#b1060f"}}),Styles.setCss(adData.elements.ribbon1,"background: -webkit-linear-gradient(45deg, #b1060f 90%,#9b050f 100%);"),adData.elements.ribbon3=new UIComponent({id:"ribbon2",target:adData.elements.ribbonTransition,css:{x:185,y:0,width:115,height:250,rotation:0,backgroundColor:"#b1060f"}}),Styles.setCss(adData.elements.ribbon3,"background: -webkit-linear-gradient(45deg, #9b050f 0%,#b1060f 10%);"),adData.elements.ribbon2Container=new UIComponent({id:"ribbon2",target:adData.elements.ribbonTransition,css:{x:87,y:-35,width:153,height:400,rotation:-19}}),adData.elements.ribbon2=new UIComponent({id:"ribbon2",target:adData.elements.ribbon2Container,css:{x:0,y:0,width:153,height:400,backgroundColor:"#e50914"}}),TweenLite.to(adData.elements.ribbon1,0,{height:0}),TweenLite.to(adData.elements.ribbon2,0,{height:0}),TweenLite.to(adData.elements.ribbon3,0,{y:250}),Styles.setCss(adData.elements.redAdContainer,{"background-color":"#f5f5f1"})},this.buildBorder=function(){new UIBorder({id:"main",target:adData.elements.redAdContainer,size:1,color:"#737373"})}},Animation=new function(){this.startAd=function(){global.removePreloader(),Styles.setCss(global.adData.elements.redAdContainer,{opacity:1})},this.startScene=function(){TweenLite.to(adData.elements.colorShape,0,{delay:.5,alpha:0}),Animation.doTransition()},this.doTransition=function(){TweenLite.to(adData.elements.ribbon1,.1,{height:300}),TweenLite.to(adData.elements.ribbon2,.1,{delay:.1,height:425,rotation:"-=.001"}),TweenLite.to(adData.elements.ribbon3,.1,{delay:.25,y:0}),TweenLite.to(adData.elements.ribbon1,.1,{delay:.49,height:0}),TweenLite.to(adData.elements.ribbon2,.1,{delay:.64,y:315}),TweenLite.to(adData.elements.ribbon3,.1,{delay:.79,y:-250})}};